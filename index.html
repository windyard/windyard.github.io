<!DOCTYPE html>
<html class="has-navbar-fixed-top">
<head><meta name="generator" content="Hexo 3.8.0">
    <meta charset="utf-8">
<title>Windyard</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

<!-- <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/outdated-browser/1.1.5/outdatedbrowser.min.css"> -->

<link rel="icon" href="/favicon.png">







    <meta property="og:type" content="website">
<meta property="og:title" content="Windyard">
<meta property="og:url" content="https://windyard.com/index.html">
<meta property="og:site_name" content="Windyard">
<meta property="og:locale" content="zh-cn">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Windyard">






<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Ovo|Source+Code+Pro">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/bulma/0.6.2/css/bulma.min.css">


<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/lightgallery/1.6.8/css/lightgallery.min.css">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/justifiedGallery/3.6.5/css/justifiedGallery.min.css">


<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atom-one-light.min.css">

<link rel="stylesheet" href="/css/style.css">

<script defer src="//use.fontawesome.com/releases/v5.0.8/js/all.js"></script>


    
    
    
    
    
    
    
    
    
    

    


</head>
<body>
    
<nav class="navbar is-transparent is-fixed-top navbar-main" role="navigation" aria-label="main navigation">
    <div class="container">
        <div class="navbar-brand">
            <a class="navbar-item navbar-logo" href="/">
                
                    
                    <img src="/favicon.png" alt="" height="28">
                    
                
            </a>
            <div class="navbar-burger">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
        
        <div class="navbar-menu navbar-start">
            
            <a class="navbar-item " href="/archives">Archives</a>
            
        </div>
        
        <div class="navbar-menu navbar-end">
            
            <a class="navbar-item search" title="æœç´¢" href="javascript:;">
                <i class="fas fa-search"></i>
            </a>
            
            
            
            <a class="navbar-item" title="GitHub" href="https://github.com/ppoffice/hexo-theme-minos">
                
                <i class="fab fa-github"></i>
                
            </a>
               
            
        </div>
    </div>
</nav>

    <section class="section">
    <div class="container">
    
        <article class="article content gallery" itemscope="" itemprop="blogPost">
    <h1 class="article-title is-size-3 is-size-4-mobile" itemprop="name">
        
            <a href="/2019/05/27/super-extends-js/" itemprop="url">ã€Œè¯‘ã€æ·±åº¦ç†è§£ JavaScript ES6 ä¸­çš„ â€œSuperâ€ å’Œ â€œExtendsâ€</a>
        
    </h1>
    <div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile">
        <span class="column is-narrow">
            <time datetime="2019-05-27T13:35:42.000Z" itemprop="datePublished">5æœˆ 27 2019</time>
        </span>
        
        
        <span class="column is-narrow">
            
            
            16 åˆ†é’Ÿ è¯»å®Œ (çº¦ 2389 å­—)
        </span>
        
    </div>
    <div class="article-entry is-size-6-mobile" itemprop="articleBody">
    
        <p><strong><em>ä½œè€…ï¼š<a href="https://medium.com/@anurag.majumdar" target="_blank" rel="noopener">Anurag Majumdar</a></em></strong><br><strong><em>åŸæ–‡é“¾æ¥ï¼š<a href="https://medium.com/beginners-guide-to-mobile-web-development/super-and-extends-in-javascript-es6-understanding-the-tough-parts-6120372d3420" target="_blank" rel="noopener">â€œSuperâ€ and â€œExtendsâ€ In JavaScript ES6 - Understanding The Tough Parts</a></em></strong></p>
<p><strong>ES6</strong> çš„ <strong>class</strong> è¯­æ³•ä»¥åŠå…¶ä»–æ–°ç‰¹æ€§è®© <strong>JavaScript</strong> æ˜¾å¾—ç®€å•å¤šäº†ã€‚ä»Šå¤©æˆ‘ä»¬å°†ç»“åˆ <strong>class</strong> è¯­æ³•å’Œ<strong>ç»§æ‰¿</strong>æ¦‚å¿µæ¥åˆ†æä¸€äº›ä»£ç ã€‚çŒœçš„æ²¡é”™ï¼Œæˆ‘ä»¬è¦ç ”ç©¶çš„æ­£æ˜¯ <strong>ES6</strong> ä¸­çš„ <strong>super</strong> å’Œ <strong>extends</strong> å…³é”®å­—ã€‚å­¦ä¹ æ–°ç‰¹æ€§æœ€å¥½çš„æ–¹å¼å°±æ˜¯åœ¨å®ä¾‹ä¸­æ·±å…¥çš„ç ”ç©¶å®ƒã€‚è®©æˆ‘ä»¬å¼€å§‹å§ï¼</p>
<h2 id="åœ¨ä»£ç ä¸­ä½¿ç”¨-super-å’Œ-extends"><a href="#åœ¨ä»£ç ä¸­ä½¿ç”¨-super-å’Œ-extends" class="headerlink" title="åœ¨ä»£ç ä¸­ä½¿ç”¨ super å’Œ extends"></a>åœ¨ä»£ç ä¸­ä½¿ç”¨ super å’Œ extends</h2><p>æˆ‘ä»¬å¯ä»¥å€ŸåŠ© <strong>super</strong> å’Œ <strong>extends</strong>  JavaScript ä¸­æ‰©å±•ä¸€ä¸ª classã€‚æ¥çœ‹ä¸€ä¸‹ä¸‹é¢çš„ä¾‹å­ä¸­æ˜¯å¦‚ä½•ä½¿ç”¨è¿™ä¸¤ä¸ªå…³é”®å­—çš„ã€‚</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Animal</span> </span>&#123;</span><br><span class="line">    <span class="hljs-keyword">constructor</span>(name, weight) &#123;</span><br><span class="line">        <span class="hljs-keyword">this</span>.name = name;</span><br><span class="line">        <span class="hljs-keyword">this</span>.weight = weight;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    eat() &#123;</span><br><span class="line">        <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">$&#123;<span class="hljs-keyword">this</span>.name&#125;</span> is eating!`</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    sleep() &#123;</span><br><span class="line">        <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">$&#123;<span class="hljs-keyword">this</span>.name&#125;</span> is going to sleep!`</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    wakeUp() &#123;</span><br><span class="line">        <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">$&#123;<span class="hljs-keyword">this</span>.name&#125;</span> is waking up!`</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Gorilla</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Animal</span> </span>&#123;</span><br><span class="line">    <span class="hljs-keyword">constructor</span>(name, weight) &#123;</span><br><span class="line">        <span class="hljs-keyword">super</span>(name, weight);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    climbTrees() &#123;</span><br><span class="line">        <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">$&#123;<span class="hljs-keyword">this</span>.name&#125;</span> is climbing trees!`</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    poundChest() &#123;</span><br><span class="line">        <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">$&#123;<span class="hljs-keyword">this</span>.name&#125;</span> is pounding its chest!`</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    showVigour() &#123;</span><br><span class="line">        <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">$&#123;<span class="hljs-keyword">super</span>.eat()&#125;</span> <span class="hljs-subst">$&#123;<span class="hljs-keyword">this</span>.poundChest()&#125;</span>`</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    dailyRoutine() &#123;</span><br><span class="line">        <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">$&#123;<span class="hljs-keyword">super</span>.wakeUp()&#125;</span> <span class="hljs-subst">$&#123;<span class="hljs-keyword">this</span>.poundChest()&#125;</span> <span class="hljs-subst">$&#123;<span class="hljs-keyword">super</span>.eat()&#125;</span> <span class="hljs-subst">$&#123;<span class="hljs-keyword">super</span>.sleep()&#125;</span>`</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">display</span>(<span class="hljs-params">content</span>) </span>&#123;</span><br><span class="line">    <span class="hljs-built_in">console</span>.log(content);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">const</span> gorilla = <span class="hljs-keyword">new</span> Gorilla(<span class="hljs-string">'George'</span>, <span class="hljs-string">'160Kg'</span>);</span><br><span class="line">display(gorilla.poundChest());</span><br><span class="line">display(gorilla.sleep());</span><br><span class="line">display(gorilla.showVigour());</span><br><span class="line">display(gorilla.dailyRoutine());</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// OUTPUT:</span></span><br><span class="line"><span class="hljs-comment">// George is pounding its chest!</span></span><br><span class="line"><span class="hljs-comment">// George is going to sleep!</span></span><br><span class="line"><span class="hljs-comment">// George is eating! George is pounding its chest!</span></span><br><span class="line"><span class="hljs-comment">// George is waking up! George is pounding its chest! George is eating! George is going to sleep!</span></span><br></pre></td></tr></table></figure>
<p><em>ES6 Class åŠ Subclass è¯­æ³•</em></p>
<p>ä¸Šé¢çš„ä»£ç ä¸­æœ‰ä¸¤ä¸ª <strong>JavaScript</strong> classï¼Œåˆ†åˆ«å«åš <strong>Animal</strong> å’Œ <strong>Gorilla</strong>ã€‚</p>
<p><strong>Gorilla</strong> class é€šè¿‡ä½¿ç”¨ <strong>extends</strong> å…³é”®å­—å°†è‡ªå·±è®¾ç½®ä¸º <strong>Animal</strong> class çš„<strong>é™„å±ç±»ï¼Œ</strong>æˆ–è€…ä¹Ÿå¯ä»¥ç§°ä¹‹ä¸º<strong>å­ç±»</strong>ã€‚</p>
<p>ä¸è¿‡ï¼Œä¸çŸ¥é“ä½ æœ‰æ²¡æœ‰æ³¨æ„åˆ°ï¼Œ<strong>super</strong> å…³é”®å­—åœ¨è¿™é‡Œæœ‰ä¸¤ç§ä¸åŒçš„ç”¨æ³•ã€‚åœ¨ <strong>Gorilla</strong> æ„é€ å‡½æ•°ä¸­ï¼ˆä»£ç  23 è¡Œï¼‰ï¼Œ<strong>super</strong> è¢«å½“ä½œæ–¹æ³•ä½¿ç”¨ï¼Œç„¶è€Œåœ¨ <strong>Gorilla</strong> çš„ <strong>showVigour()</strong> æ–¹æ³•ï¼ˆä»£ç  35 è¡Œï¼‰åŠ <strong>dailyRoutine()</strong> æ–¹æ³•ï¼ˆä»£ç  39 è¡Œï¼‰ä¸­ <strong>super</strong> å´æ˜¯è¢«å½“ä½œ<strong>â€œå¯¹è±¡â€</strong>ä½¿ç”¨çš„ã€‚</p>
<p><strong>super</strong> å…³é”®å­—æœ‰ä¸¤ç§ä¸åŒç”¨æ³•çš„åŸå› æ˜¯ï¼šåœ¨ç¬¬ 23 è¡Œä¸­ï¼Œ<strong>super</strong> å…³é”®å­—æ˜¯ä½œä¸ºä¸€ä¸ª<strong>å‡½æ•°</strong>ï¼Œå®ƒä½¿ç”¨ä¼ é€’ç»™ <strong>Gorilla</strong> çš„å‚æ•°æ¥è°ƒç”¨çˆ¶ç±» <strong>Animal</strong>ã€‚è¿™æ˜¯ç¡®ä¿ <strong>Gorilla</strong> æ˜¯ <strong>Animal</strong> çš„å®ä¾‹çš„å…³é”®ä¸€æ­¥ã€‚åœ¨ç¬¬ 35 è¡Œå’Œç¬¬ 39 è¡Œä¸­ï¼Œ<strong>Super</strong> è¢«ç”¨ä½œæ˜¯ä¸€ä¸ª<strong>å¯¹è±¡</strong>ï¼Œæ¥å¼•ç”¨ä¸€ä¸ª <strong>Animal</strong> å®ä¾‹ï¼ˆçˆ¶ç±»ï¼‰ã€‚è¿™é‡Œçš„ <strong>super</strong> å…³é”®å­—ç”¨æ¥æ˜¾å¼çš„è°ƒç”¨çˆ¶ç±» <strong>Animal</strong> çš„æ–¹æ³•ã€‚</p>
<p>ç†Ÿæ‚‰ C#ã€JAVAã€Python ç­‰è¯­è¨€çš„äººåº”è¯¥èƒ½æ˜ç™½è¿™æ˜¯æ€ä¹ˆå›äº‹ã€‚ä¸è¿‡ï¼Œåœ¨ ES6 å‡ºç°ä¹‹å‰ JavaScript å¯æ²¡è¿™ä¹ˆç®€æ˜ï¼Œç‰¹åˆ«æ˜¯åœ¨ç±»è¿™ä¸ªé—®é¢˜ä¸Šã€‚é‚£ä¹ˆåœ¨æ²¡æœ‰ <strong>class</strong> è¯­æ³•ã€<strong>super</strong> åŠ <strong>extends</strong> å…³é”®å­—çš„å¹´ä»£äººä»¬æ˜¯æ€ä¹ˆå†™ä»£ç çš„å‘¢ï¼Ÿè¿˜æ˜¯è¿™ç¾¤ä»æœªç”¨è¿‡ä»¥ä¸Šæ¦‚å¿µçš„äººçªå‘å¥‡æƒ³çš„è¦æ·»åŠ è¿™äº›ç‰¹æ€§ï¼Ÿè®©æˆ‘ä»¬æ¥æ¢å¯»ä¸€ä¸‹ï¼</p>
<h2 id="ä¼ ç»Ÿçš„-JavaScript-ç±»"><a href="#ä¼ ç»Ÿçš„-JavaScript-ç±»" class="headerlink" title="ä¼ ç»Ÿçš„ JavaScript ç±»"></a>ä¼ ç»Ÿçš„ JavaScript ç±»</h2><p>äº‹å®ä¸Šï¼Œé¢å‘å¯¹è±¡çš„ JavaScript ä½¿ç”¨<strong>åŸå‹ç»§æ‰¿</strong>æ¥æ‰©å±•ç±»ã€‚æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ç”¨ä¼ ç»Ÿçš„ JavaScript è¯­æ³•æ¥å†™ä¸Šé¢çš„ä¾‹å­ã€‚ä¹Ÿè®¸è¿™å°†å¸®ä½ æ‰¾åˆ°éšè—çš„çœŸç›¸ã€‚</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Animal</span>(<span class="hljs-params">name, weight</span>) </span>&#123;</span><br><span class="line">    <span class="hljs-keyword">this</span>.name = name;</span><br><span class="line">    <span class="hljs-keyword">this</span>.weight = weight;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Animal.prototype.eat = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">    <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">$&#123;<span class="hljs-keyword">this</span>.name&#125;</span> is eating!`</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Animal.prototype.sleep = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">    <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">$&#123;<span class="hljs-keyword">this</span>.name&#125;</span> is going to sleep!`</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Animal.prototype.wakeUp = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">    <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">$&#123;<span class="hljs-keyword">this</span>.name&#125;</span> is waking up!`</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Gorilla</span>(<span class="hljs-params">name, weight</span>) </span>&#123;</span><br><span class="line">    Animal.call(<span class="hljs-keyword">this</span>, name, weight);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Gorilla.prototype = <span class="hljs-built_in">Object</span>.create(Animal.prototype);</span><br><span class="line">Gorilla.prototype.constructor = Gorilla;</span><br><span class="line"></span><br><span class="line">Gorilla.prototype.climbTrees = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">    <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">$&#123;<span class="hljs-keyword">this</span>.name&#125;</span> is climbing trees!`</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Gorilla.prototype.poundChest = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">    <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">$&#123;<span class="hljs-keyword">this</span>.name&#125;</span> is pounding its chest!`</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Gorilla.prototype.showVigour = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">    <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">$&#123;Animal.prototype.eat.call(<span class="hljs-keyword">this</span>)&#125;</span> <span class="hljs-subst">$&#123;<span class="hljs-keyword">this</span>.poundChest()&#125;</span>`</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Gorilla.prototype.dailyRoutine = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">    <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">$&#123;Animal.prototype.wakeUp.call(<span class="hljs-keyword">this</span>)&#125;</span> <span class="hljs-subst">$&#123;<span class="hljs-keyword">this</span>.poundChest()&#125;</span> <span class="hljs-subst">$&#123;Animal.prototype.eat.call(<span class="hljs-keyword">this</span>)&#125;</span> <span class="hljs-subst">$&#123;Animal.prototype.sleep.call(<span class="hljs-keyword">this</span>)&#125;</span>`</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">display</span>(<span class="hljs-params">content</span>) </span>&#123;</span><br><span class="line">    <span class="hljs-built_in">console</span>.log(content);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">var</span> gorilla = <span class="hljs-keyword">new</span> Gorilla(<span class="hljs-string">'George'</span>, <span class="hljs-string">'160Kg'</span>);</span><br><span class="line">display(gorilla.poundChest());</span><br><span class="line">display(gorilla.sleep());</span><br><span class="line">display(gorilla.showVigour());</span><br><span class="line">display(gorilla.dailyRoutine());</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// OUTPUT:</span></span><br><span class="line"><span class="hljs-comment">// George is pounding its chest!</span></span><br><span class="line"><span class="hljs-comment">// George is going to sleep!</span></span><br><span class="line"><span class="hljs-comment">// George is eating! George is pounding its chest!</span></span><br><span class="line"><span class="hljs-comment">// George is waking up! George is pounding its chest! George is eating! George is going to sleep!</span></span><br></pre></td></tr></table></figure>
<p><em>ES6 å‡ºç°ä¹‹å‰é¢å‘å¯¹è±¡çš„ JavaScript</em></p>
<p>çœ‹å®Œä¸Šé¢çš„ä»£ç ä»¥åä½ ä»¬ä¸€å®šåœ¨æƒ³ï¼Œç­‰ä¸€ä¸‹ï¼Œè¿™é‡Œé¢æ€ä¹ˆæ²¡æœ‰ <strong>class</strong>ï¼Ÿä¹Ÿæ²¡æœ‰ <strong>constructor</strong>ï¼Ÿè¿™äº›å¤è€çš„ <strong>JavaScript</strong> ä»£ç æ˜¯å¦‚ä½•åšåˆ°åœ¨ä¸ä½¿ç”¨ <strong>extends</strong> å’Œ <strong>super</strong> å…³é”®å­—çš„æƒ…å†µä¸‹å®ç°ç»§æ‰¿çš„ï¼Ÿè¿™æ ·å†™ä»£ç ä¸æ˜¯å¾ˆä¸‘å˜›ï¼Ÿ</p>
<p>æ²¡é”™å„¿æˆ‘å®Œå…¨ç†è§£ä½ ä»¬çš„æ„Ÿå—ã€‚å¾ˆä¸å¹¸ï¼ŒJavaScript çš„åº•å±‚å®ç°ä»æœªå˜è¿‡ã€‚ä¸ç®¡æœ‰å¤šå°‘æ–°ç‰¹æ€§è¢«æ·»åŠ ï¼Œå®ƒçš„åº•å±‚ä»ç„¶æ˜¯è€æ ·å­ã€‚<strong>class</strong>ã€<strong>constructor</strong>ã€<strong>super</strong> å’Œ <strong>extends</strong> ç­‰å…³é”®å­—åªæ˜¯ä¸ºä»–æ·»åŠ äº†ä¸€äº›è¯­æ³•ç³–ï¼Œä»¥ä½¿å¾—ä»£ç å¯è¯»æ€§æ›´å¥½ä¹Ÿæ›´æ˜“äºç¼–å†™ã€‚</p>
<p>è®©æˆ‘æ¥è§£é‡Šä¸€ä¸‹ <strong>ES6</strong> å“ªäº›ä»£ç å¯¹åº”äº†ä¼ ç»Ÿçš„ JavaScript ä»£ç ã€‚</p>
<p>å¦‚æœä½ æ˜¯åˆæ¬¡æ¥è§¦ JavaScript ä¸­çš„ <strong>prototype</strong> å’Œ <strong>inheritance</strong> æ¦‚å¿µï¼Œè¯·å…ˆé˜…è¯»ä¸‹é¢ä¸¤ç¯‡æ–‡ç« åå†ç»§ç»­é˜…è¯»æœ¬æ–‡å‰©ä¸‹çš„ç« èŠ‚ï¼š</p>
<p><a href="https://hackernoon.com/prototypes-in-javascript-5bba2990e04b" target="_blank" rel="noopener"><img src="/pictures/super-extends/1.png" alt=""></a></p>
<p><a href="https://hackernoon.com/inheritance-in-javascript-21d2b82ffa6f" target="_blank" rel="noopener"><img src="/pictures/super-extends/2.png" alt=""></a></p>
<p>è¿™ä¸¤ç¯‡å‚è€ƒæ–‡ç« å¯¹ä½ æ›´å¥½çš„ç†è§£ä¸‹é¢çš„ç« èŠ‚ä¼šæœ‰å¾ˆå¤§å¸®åŠ©ã€‚</p>
<h2 id="ES6-ä¸ä¼ ç»Ÿ-JavaScript-ä»£ç å¯¹æ¯”"><a href="#ES6-ä¸ä¼ ç»Ÿ-JavaScript-ä»£ç å¯¹æ¯”" class="headerlink" title="ES6 ä¸ä¼ ç»Ÿ JavaScript ä»£ç å¯¹æ¯”"></a>ES6 ä¸ä¼ ç»Ÿ JavaScript ä»£ç å¯¹æ¯”</h2><p>ä¸‹é¢çš„ç« èŠ‚å›åˆ†è§£å¯¹æ¯” ES6 ä»£ç ä¸ä¼ ç»Ÿ JavaScript é£æ ¼ä»£ç çš„å¼‚åŒã€‚</p>
<h3 id="ç±»å£°æ˜"><a href="#ç±»å£°æ˜" class="headerlink" title="ç±»å£°æ˜"></a>ç±»å£°æ˜</h3><p>ä¸‹é¢çš„ä»£ç ç‰‡æ®µå¯¹æ¯”äº†ä¸¤ç§ç±»å£°æ˜æ–¹å¼ã€‚</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// ES6 style</span></span><br><span class="line"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Animal</span> </span>&#123;</span><br><span class="line">    <span class="hljs-keyword">constructor</span>(name, weight) &#123;</span><br><span class="line">        <span class="hljs-keyword">this</span>.name = name;</span><br><span class="line">        <span class="hljs-keyword">this</span>.weight = weight;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="hljs-comment">//...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// Check Type of ES6 class</span></span><br><span class="line"><span class="hljs-keyword">typeof</span> Animal <span class="hljs-comment">// function</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// Traditional style</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Animal</span>(<span class="hljs-params">name, weight</span>) </span>&#123;</span><br><span class="line">    <span class="hljs-keyword">this</span>.name = name;</span><br><span class="line">    <span class="hljs-keyword">this</span>.weight = weight;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><em>ç±»å£°æ˜å¯¹æ¯”</em></p>
<p><strong>ES6</strong> çš„ç±»å£°æ˜ç›´æ¥ä½¿ç”¨ <strong>class</strong> å…³é”®å­—ï¼Œç„¶ååœ¨ <strong>constructor</strong> ï¼ˆæ„é€ å‡½æ•°ï¼‰ä¸­å®šä¹‰å®ä¾‹å˜é‡ã€‚è€Œåœ¨ä¼ ç»Ÿçš„ JavaScript ä¸­æ˜¯æ²¡æœ‰ <strong>class</strong> è¿™ç§ä¸œè¥¿çš„ã€‚å®é™…ä¸Šåœ¨ JavaScript å†…éƒ¨ <strong>class</strong> å°±æ˜¯ä¸€ä¸ªå‡½æ•°ï¼ˆå‚è§ä»£ç ç‰‡æ®µç¬¬ 11 è¡Œï¼‰ã€‚</p>
<p>ç¬¬ 3 è¡Œçš„ <strong>constructor</strong> å‡½æ•°è·Ÿç¬¬ 14 è¡Œçš„å‡½æ•°æ˜¯ä¸€æ ·çš„ã€‚è¿™é‡Œçš„ <strong>Animal</strong> å‡½æ•°å°±ç›¸å½“äº <strong>constructor</strong> å‡½æ•°ã€‚</p>
<h3 id="Class-ä¸­çš„æ–¹æ³•"><a href="#Class-ä¸­çš„æ–¹æ³•" class="headerlink" title="Class ä¸­çš„æ–¹æ³•"></a>Class ä¸­çš„æ–¹æ³•</h3><figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// ES6 style</span></span><br><span class="line"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Animal</span> </span>&#123;</span><br><span class="line">    <span class="hljs-comment">// ...</span></span><br><span class="line">    eat() &#123;</span><br><span class="line">        <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">$&#123;<span class="hljs-keyword">this</span>.name&#125;</span> is eating!`</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    sleep() &#123;</span><br><span class="line">        <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">$&#123;<span class="hljs-keyword">this</span>.name&#125;</span> is going to sleep!`</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    wakeUp() &#123;</span><br><span class="line">        <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">$&#123;<span class="hljs-keyword">this</span>.name&#125;</span> is waking up!`</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="hljs-comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// Traditional style</span></span><br><span class="line">Animal.prototype.eat = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">    <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">$&#123;<span class="hljs-keyword">this</span>.name&#125;</span> is eating!`</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Animal.prototype.sleep = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">    <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">$&#123;<span class="hljs-keyword">this</span>.name&#125;</span> is going to sleep!`</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><em>æ–¹æ³•å£°æ˜å¯¹æ¯”</em></p>
<p>ä»ç¬¬ 4 è¡Œåˆ°ç¬¬ 14 è¡Œæ˜¯ <strong>ES6</strong> é£æ ¼çš„ç±»ä¸­çš„æ–¹æ³•ã€‚ä¸è¿‡åœ¨ä¼ ç»Ÿçš„ JavaScript æ˜¯ä¸å¯èƒ½è¿™æ ·å†™çš„ï¼Œå› ä¸ºæ ¹æœ¬å°±ä¸å­˜åœ¨ <strong>class</strong> è¿™ä¸ªä¸œè¥¿æ¥è®©ä½ è½»æ¾çš„å£°æ˜æ–¹æ³•ã€‚åœ¨ä¼ ç»Ÿçš„ <strong>JavaScript</strong> ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡æŠŠæ–¹æ³•æ·»åŠ åˆ° <strong>prototype</strong> ä¸Šæ¥è¾¾åˆ°ä¸ºç±»æ·»åŠ æ–¹æ³•è¿™ä¸€ç›®çš„ã€‚ç¬¬ 19 è¡Œåˆ°ç¬¬ 29 è¡Œæ˜¯ä¸ºä¼ ç»Ÿ <strong>JavaScript</strong> ç±»æ·»åŠ æ–¹æ³•çš„å†™æ³•ã€‚</p>
<h3 id="extends-åœ¨ä¼ ç»Ÿ-JavaScript-ä¸­çš„å¯¹åº”"><a href="#extends-åœ¨ä¼ ç»Ÿ-JavaScript-ä¸­çš„å¯¹åº”" class="headerlink" title="extends åœ¨ä¼ ç»Ÿ JavaScript ä¸­çš„å¯¹åº”"></a>extends åœ¨ä¼ ç»Ÿ JavaScript ä¸­çš„å¯¹åº”</h3><p>å½“æˆ‘ä»¬è¦ä»<strong>çˆ¶ç±»</strong>æ‰©å±•ä¸€ä¸ª<strong>å­ç±»</strong>æ—¶ï¼Œä¸¤ç§å†™æ³•çš„å·®å¼‚å°±æ›´å¤§äº†ã€‚å‚è§ä¸‹é¢çš„ä»£ç ç‰‡æ®µï¼š</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// ES6 style</span></span><br><span class="line"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Gorilla</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Animal</span> </span>&#123;</span><br><span class="line">    <span class="hljs-keyword">constructor</span>(name, weight) &#123;</span><br><span class="line">        <span class="hljs-keyword">super</span>(name, weight);</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="hljs-comment">//...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// Traditional style</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Gorilla</span>(<span class="hljs-params">name, weight</span>) </span>&#123;</span><br><span class="line">    Animal.call(<span class="hljs-keyword">this</span>, name, weight);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Gorilla.prototype = <span class="hljs-built_in">Object</span>.create(Animal.prototype);</span><br><span class="line">Gorilla.prototype.constructor = Gorilla;</span><br></pre></td></tr></table></figure>
<p><em>extends å…³é”®å­—ä¸ä¼ ç»Ÿå®ç°æ–¹å¼çš„å¯¹æ¯”</em></p>
<p>æˆ‘ä»¬çœ‹åˆ° <strong>extends</strong> å…³é”®å­—ç”¨ <strong>ES6</strong> çš„é£æ ¼å¤„ç†äº†ä»çˆ¶ç±» <strong>Animal</strong> æ‰©å±•å‡ºå­ç±»çš„æ“ä½œï¼Œä¸è¿‡è¿™é‡Œä¹Ÿç”¨åˆ°äº† <strong>super</strong> å…³é”®å­—æ¥ç¡®ä¿ <strong>Gorilla</strong> çš„æ„é€ å‡½æ•°è°ƒç”¨äº† <strong>Animal</strong> ç±»ï¼Œè¿™æ ·å®ƒå°±èƒ½ç»§æ‰¿ <strong>Animal</strong> çš„ç‰¹æ€§å’Œè¡Œä¸ºã€‚åœ¨è¿™é‡Œï¼Œ<strong>super</strong> å…³é”®å­—æ˜¯ä½œä¸º<strong>å‡½æ•°</strong>æ¥è°ƒç”¨ <strong>Animal</strong> ç±»æ¥åˆå§‹åŒ– <strong>Gorilla</strong>ã€‚è¿™æ—¶å€™ï¼Œ<strong>super</strong> çš„ä½œç”¨ç›¸å½“äº <strong>Animal.call(this,â€¦)</strong>ã€‚</p>
<p>è‹¥æ˜¯ç”¨ä¼ ç»Ÿçš„å†™æ³•æ¥å®ç°ç»§æ‰¿ï¼Œåˆ™è¦å¤šå‡ ä¸ªæ­¥éª¤ã€‚é¦–å…ˆè¦åˆ›å»ºä¸€ä¸ªå­ç±» <strong>Gorilla</strong> çš„å‡½æ•°ï¼Œå¦‚ä»£ç ç¬¬ 10 è¡Œæ‰€ç¤ºã€‚ç”±äº <strong>Gorilla</strong> è¦ç»§æ‰¿ <strong>Animal</strong> çš„ç‰¹æ€§å’Œè¡Œä¸ºï¼Œå®ƒéœ€è¦åœ¨ <strong>Gorilla</strong> çš„æ„é€ å‡½æ•°ä¸­è°ƒç”¨ <strong>Animal</strong> çš„æ„é€ å‡½æ•°ï¼Œå¦‚ä»£ç ç¬¬ 11 è¡Œæ‰€ç¤ºï¼Œè¿™è¡Œä¸ç¬¬ 4 è¡Œçš„åŠŸèƒ½æ˜¯ä¸€æ ·çš„ã€‚åªä¸è¿‡æˆ‘ä»¬éœ€è¦æ˜¾å¼çš„ä¼ é€’ <strong>â€œthisâ€</strong> å¼•ç”¨ç»™ <strong>Animal</strong> ç±»ä»¥ä¿è¯è°ƒç”¨æ˜¯åœ¨ <strong>Gorilla</strong> ä¸­å‘ç”Ÿçš„ã€‚</p>
<p>ä¸ä»…å¦‚æ­¤ï¼Œæˆ‘ä»¬è¿˜éœ€è¦å°† <strong>Gorilla</strong> å‡½æ•°çš„ <strong>prototype</strong> è®¾ç½®ä¸ºä¸€ä¸ªä» <strong>Animal</strong> çš„ <strong>prototype</strong> åˆ›å»ºçš„æ–°å¯¹è±¡ï¼Œå¦‚ä»£ç ç¬¬ 11 è¡Œæ‰€ç¤ºã€‚è¿™æ ·ä¸€æ¥ï¼Œæˆ‘ä»¬å°±é‡å†™äº† <strong>Gorilla</strong> çš„ <strong>prototype</strong> å¯¹è±¡ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ä»£ç ç¬¬ 15 è¡Œä¸­æ˜¾å¼çš„è®¾ç½® <strong>Gorilla</strong> çš„æ„é€ å‡½æ•°ã€‚é€šè¿‡è¿™äº›æ­¥éª¤æˆ‘ä»¬å°† <strong>Gorilla</strong> ç±»è®¾ç½®æˆä¸º <strong>Animal</strong> ç±»çš„å­ç±»ã€‚</p>
<h3 id="super-åœ¨ä¼ ç»Ÿ-JavaScript-ä¸­çš„å¯¹åº”"><a href="#super-åœ¨ä¼ ç»Ÿ-JavaScript-ä¸­çš„å¯¹åº”" class="headerlink" title="super åœ¨ä¼ ç»Ÿ JavaScript ä¸­çš„å¯¹åº”"></a>super åœ¨ä¼ ç»Ÿ JavaScript ä¸­çš„å¯¹åº”</h3><p>æˆ‘ä»¬å·²ç»è§è¯†è¿‡ <strong>super</strong> å…³é”®å­—çš„ä¸€ç§å¯¹åº”ï¼Œå³ï¼Œä¸‹é¢ä»£ç ç‰‡æ®µç¬¬ 4 è¡Œå’Œç¬¬ 19 è¡Œï¼Œ<strong>super</strong> è¢«ç”¨ä½œ<strong>å‡½æ•°</strong>ã€‚</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// ES6 style</span></span><br><span class="line"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Gorilla</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Animal</span> </span>&#123;</span><br><span class="line">    <span class="hljs-keyword">constructor</span>(name, weight) &#123;</span><br><span class="line">        <span class="hljs-keyword">super</span>(name, weight);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    showVigour() &#123;</span><br><span class="line">        <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">$&#123;<span class="hljs-keyword">super</span>.eat()&#125;</span> <span class="hljs-subst">$&#123;<span class="hljs-keyword">this</span>.poundChest()&#125;</span>`</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    dailyRoutine() &#123;</span><br><span class="line">        <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">$&#123;<span class="hljs-keyword">super</span>.wakeUp()&#125;</span> <span class="hljs-subst">$&#123;<span class="hljs-keyword">this</span>.poundChest()&#125;</span> <span class="hljs-subst">$&#123;<span class="hljs-keyword">super</span>.eat()&#125;</span> <span class="hljs-subst">$&#123;<span class="hljs-keyword">super</span>.sleep()&#125;</span>`</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="hljs-comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// Traditional style</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Gorilla</span>(<span class="hljs-params">name, weight</span>) </span>&#123;</span><br><span class="line">    Animal.call(<span class="hljs-keyword">this</span>, name, weight);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Gorilla.prototype = <span class="hljs-built_in">Object</span>.create(Animal.prototype);</span><br><span class="line">Gorilla.prototype.constructor = Gorilla;</span><br><span class="line"></span><br><span class="line">Gorilla.prototype.showVigour = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">    <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">$&#123;Animal.prototype.eat.call(<span class="hljs-keyword">this</span>)&#125;</span> <span class="hljs-subst">$&#123;<span class="hljs-keyword">this</span>.poundChest()&#125;</span>`</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Gorilla.prototype.dailyRoutine = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;</span><br></pre></td></tr></table></figure>
<p><em>super å…³é”®å­—ä¸ä¼ ç»Ÿå®ç°æ–¹å¼çš„å¯¹æ¯”</em></p>
<p><strong>super</strong> å…³é”®å­—ä¹Ÿå¯ä»¥ç”¨ä½œçˆ¶ç±»çš„å®ä¾‹ï¼Œå¦‚ä»£ç ç¬¬ 8 è¡Œå’Œç¬¬ 12 è¡Œè¿™æ ·è°ƒç”¨ <strong>Animal</strong> ç±»çš„æ–¹æ³•ã€‚</p>
<p>ä»£ç ç¬¬ 26 è¡Œå±•ç¤ºäº†åœ¨ä¼ ç»Ÿçš„ JavaScript ä¸­å®ç°åŒæ ·çš„ç›®çš„ï¼Œ<strong>super</strong> å®ä¾‹ç›¸å½“äºä¼ ç»Ÿå†™æ³•çš„ <strong>ParentClassName.prototype.methodName.call(this, â€¦)</strong>ã€‚å³ä¼ ç»Ÿå†™æ³•éœ€è¦ç¼–å†™å¤§é‡çš„ä»£ç æ¥ç¡®ä¿çˆ¶ç±»çš„æ–¹æ³•è¢«è°ƒç”¨ã€‚</p>
<h2 id="ç»“è®º"><a href="#ç»“è®º" class="headerlink" title="ç»“è®º"></a>ç»“è®º</h2><p>æˆ‘å¾ˆç¡®å®šï¼Œä½ ä»¬åœ¨äº†è§£äº†ä¼ ç»Ÿçš„å†™æ³•æ˜¯å¤šä¹ˆçš„å¤æ‚ä¹‹åä¸€å®šä¼šæ¯«ä¸çŠ¹è±«çš„é€‰æ‹© <strong>ES6</strong> çš„<strong>ç±»</strong>å’Œ<strong>ç»§æ‰¿</strong>ç‰¹æ€§ã€‚è€Œä¸”ï¼ŒChrome å’Œ Firefox å·²ç»æ”¯æŒäº† ES6ï¼Œä¸è¿‡ä¸ºäº†ç¡®ä¿ ES6 ç‰¹æ€§åœ¨æ‰€æœ‰çš„æµè§ˆå™¨ä¸­éƒ½èƒ½æ‰§è¡Œï¼Œä½ è¿˜æ˜¯éœ€è¦ä¸€ä¸ª babel è½¬è¯‘å™¨æ¥æŠŠ ES6 ä»£ç è½¬æ¢æˆ ES5 ä»£ç ã€‚</p>
<p>ç¥ç¼–ç å¿«ä¹ï¼ğŸ˜„</p>

    
    </div>
    
    
</article>




    
        <article class="article content gallery" itemscope="" itemprop="blogPost">
    <h1 class="article-title is-size-3 is-size-4-mobile" itemprop="name">
        
            <a href="/2019/04/01/web-components-hero-1/" itemprop="url">ã€Œè¯‘ã€Web Componentsï¼šå…¥é—¨åˆ°ç²¾é€š (1)</a>
        
    </h1>
    <div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile">
        <span class="column is-narrow">
            <time datetime="2019-04-01T13:07:24.000Z" itemprop="datePublished">4æœˆ 1 2019</time>
        </span>
        
        
        <span class="column is-narrow">
            
            
            8 åˆ†é’Ÿ è¯»å®Œ (çº¦ 1230 å­—)
        </span>
        
    </div>
    <div class="article-entry is-size-6-mobile" itemprop="articleBody">
    
        <p><strong><em>ä½œè€…ï¼š<a href="https://dev.to/thepassle" target="_blank" rel="noopener">Pascal Schilp</a></em></strong><br><strong><em>åŸæ–‡é“¾æ¥ï¼š<a href="https://dev.to/thepassle/web-components-from-zero-to-hero-4n4m" target="_blank" rel="noopener">Web Components: from zero to hero</a></em></strong></p>
<h1 id="Web-Components-å…¥é—¨åˆ°ç²¾é€š"><a href="#Web-Components-å…¥é—¨åˆ°ç²¾é€š" class="headerlink" title="Web Components: å…¥é—¨åˆ°ç²¾é€š"></a>Web Components: å…¥é—¨åˆ°ç²¾é€š</h1><p><strong>ä¸€ä¸ªç¼–å†™åŸç”Ÿ Web Components çš„æ•™ç¨‹</strong></p>
<ul>
<li><a href="#-what-are-web-components">ä»€ä¹ˆæ˜¯ Web Componentsï¼Ÿ</a></li>
<li><a href="#-a-components-lifecycle">ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ</a></li>
<li><a href="#-building-our-to-do-app">ç¼–å†™æˆ‘ä»¬çš„ to-do åº”ç”¨</a></li>
<li><a href="#-setting-properties">è®¾ç½® properties</a></li>
<li><a href="#-reflecting-properties-to-attributes">è®¾ç½® attributes</a></li>
<li><a href="">å°† properties æ˜ å°„åˆ° attributes</a></li>
<li><a href="#-events">äº‹ä»¶</a></li>
<li><a href="#-browser-support-and-polyfills">æµè§ˆå™¨æ”¯æŒä»¥åŠ polyfill</a></li>
<li><a href="#wrapping-up">åŒ…è£…</a></li>
</ul>
<p>Web Components ç°åœ¨æœ‰äº†è¶Šæ¥è¶Šå¤§çš„æ¨åŠ¨åŠ›ã€‚éšç€ Edge å›¢é˜Ÿå®£å¸ƒéƒ¨ç½² Custom Elements å’Œ Shadow DOMï¼Œæ‰€æœ‰çš„ä¸»æµæµè§ˆå™¨éƒ½å·²ç»åŸç”Ÿæ”¯æŒ Web Componentsã€‚åƒ Githubï¼ŒNetflixï¼ŒYoutube å’Œ ING ç­‰ç”šè‡³å·²ç»åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨äº† Web Componentsï¼èµï¼ä¸è¿‡ï¼Œå¾ˆè®©äººæƒŠè®¶çš„æ˜¯ï¼Œè¿™äº›æˆåŠŸçš„å¤§å…¬å¸ä¸­æ²¡æœ‰ä¸€ä¸ªåšè¿‡ï¼ˆçŒœçš„æ²¡é”™ï¼‰ to-do åº”ç”¨ï¼</p>
<p>å› æ­¤ï¼Œä»Šå¤©æˆ‘ä»¬è¦åšä¸€ä¸ª to-do åº”ç”¨ï¼Œå› ä¸ºä¸–ç•Œä¸Šè¿˜æ²¡å‡ ä¸ª to-do åº”ç”¨ã€‚ä½ å¯ä»¥åœ¨<a href="https://thepassle.github.io/webcomponents-from-zero-to-hero/" target="_blank" rel="noopener">è¿™é‡Œ</a>å…ˆé¢„è§ˆä¸€ä¸‹æˆ‘ä»¬è¦åšçš„ä¸œè¥¿ã€‚</p>
<p>åœ¨å¼€å§‹ä¹‹å‰ï¼Œæˆ‘è¦å…ˆå†™ç‚¹å…è´£å£°æ˜ï¼Œè¿™ç¯‡åšæ–‡åªæ˜¯ä¸ºäº†è®©ä½ å¯¹ Web Components çš„<em>åŸºç¡€æ¦‚å¿µ</em>æœ‰ä¸ªå¤§æ¦‚çš„äº†è§£ã€‚Web Components æ˜¯éå¸¸åº•å±‚çš„æŠ€æœ¯ï¼Œå¹¶ä¸å»ºè®®åœ¨æ²¡æœ‰è¾…åŠ©åº“çš„æƒ…å†µä¸‹ç¼–å†™å®Œæ•´çš„åº”ç”¨ï¼Œä¹Ÿä¸åº”è¯¥æ‹¿å®ƒè·Ÿå…¶ä»–æˆç†Ÿçš„æ¡†æ¶è¿›è¡Œæ¯”è¾ƒã€‚</p>
<h2 id="ä»€ä¹ˆæ˜¯-Web-Componentsï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯-Web-Componentsï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ Web Componentsï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ Web Componentsï¼Ÿ</h2><p>å…ˆè¯´é‡ç‚¹ï¼š<a href="https://developer.mozilla.org/en-US/docs/Web/Web_Components" target="_blank" rel="noopener">Web Components</a> æ˜¯ä¸€ç³»åˆ—ç¼–å†™å…·æœ‰æ¨¡å—åŒ–ã€å¯é‡ç”¨å’Œå°è£…æ€§çš„ HTML å…ƒç´ çš„è§„èŒƒã€‚æœ€æ£’çš„åœ°æ–¹åœ¨äºï¼šç”±äºå®ƒæ˜¯åŸºäº web æ ‡å‡†ï¼Œæˆ‘ä»¬æ— éœ€å®‰è£…ä»»ä½•æ¡†æ¶æˆ–åº“ã€‚ç°åœ¨ä½ å°±å¯ä»¥ç”¨çº¯ JavaScript ç¼–å†™ Web Componentsï¼</p>
<p>ä¸è¿‡å‘¢ï¼Œåœ¨æˆ‘ä»¬ä¸‹æ‰‹ä¹‹å‰ï¼Œè®©æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹ç¼–å†™ Web Components çš„å¿å®˜è§„èŒƒã€‚</p>
<h3 id="è‡ªå®šä¹‰å…ƒç´ "><a href="#è‡ªå®šä¹‰å…ƒç´ " class="headerlink" title="è‡ªå®šä¹‰å…ƒç´ "></a>è‡ªå®šä¹‰å…ƒç´ </h3><p><a href="https://w3c.github.io/webcomponents/spec/custom/" target="_blank" rel="noopener">Custom Elements</a> api å…è®¸æˆ‘ä»¬ç¼–å†™è‡ªå®šä¹‰çš„ DOM å…ƒç´ ã€‚é€šè¿‡è¿™ä¸ª apiï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ªè‡ªå®šä¹‰å…ƒç´ ï¼Œå¹¶é€šçŸ¥è§£æå™¨å¦‚ä½•æ­£ç¡®çš„æ„å»ºå…ƒç´ åŠå¦‚ä½•åº”å¯¹æ­¤ç±»å…ƒç´ çš„å˜åŠ¨ã€‚ä½ æ˜¯å¦æƒ³è¿‡åˆ›å»ºè‡ªå·±çš„å…ƒç´ ï¼Œæ¯”å¦‚ &lt;my-cool-element&gt;ï¼Ÿç°åœ¨ä½ èƒ½å¤Ÿè¿™æ ·åšäº†ï¼</p>
<h3 id="Shadow-DOM"><a href="#Shadow-DOM" class="headerlink" title="Shadow DOM"></a>Shadow DOM</h3><p><a href="https://w3c.github.io/webcomponents/spec/custom/" target="_blank" rel="noopener">Shadow DOM</a> ç»™äº†æˆ‘ä»¬å°è£…ç»„ä»¶æ ·å¼å’Œæ ‡è®°çš„èƒ½åŠ›ã€‚å®ƒæ˜¯ä¸€ä¸ª DOM å…ƒç´ çš„å­ DOM æ ‘ï¼Œå¯ä»¥ç¡®ä¿æˆ‘ä»¬çš„ç»„ä»¶æ ·å¼ä¸ä¼šæ³„æ¼åˆ°å¤–éƒ¨ä½œç”¨åŸŸï¼Œæˆ–æ˜¯è¢«å¤–éƒ¨ä½œç”¨åŸŸçš„æ ·å¼æ‰€å½±å“ã€‚æ˜¯æ¨¡å—åŒ–çš„ç»é…ã€‚</p>
<h3 id="ES-æ¨¡å—"><a href="#ES-æ¨¡å—" class="headerlink" title="ES æ¨¡å—"></a>ES æ¨¡å—</h3><p><a href="https://html.spec.whatwg.org/multipage/webappapis.html#integration-with-the-javascript-module-system" target="_blank" rel="noopener">ES æ¨¡å—</a>è§„èŒƒå®šä¹‰äº†æ ‡å‡†åŒ–ã€æ¨¡å—åŒ–ã€é«˜æ•ˆç‡çš„å¼•ç”¨å’Œé‡ç”¨ JS æ–‡ä»¶çš„æ–¹å¼ã€‚</p>
<h3 id="HTML-Templates"><a href="#HTML-Templates" class="headerlink" title="HTML Templates"></a>HTML Templates</h3><p><a href="https://html.spec.whatwg.org/multipage/scripting.html#the-template-element/" target="_blank" rel="noopener">HTML <code>&lt;template&gt;</code></a> æ ‡ç­¾å…è®¸æˆ‘ä»¬åˆ›å»ºå¯é‡ç”¨çš„ DOM å—ã€‚åœ¨ template å†…éƒ¨ï¼Œè„šæœ¬ä¸ä¼šæ‰§è¡Œï¼Œå›¾ç‰‡ä¸ä¼šåŠ è½½ï¼Œæ ·å¼å’Œæ ‡ç­¾ä¹Ÿä¸ä¼šæ¸²æŸ“ã€‚<em>åœ¨è¿™ä¸ª template è¢«æ¿€æ´»ä¹‹å‰</em>å®ƒç”šè‡³ä¼šè¢«å½“ä½œä¸å­˜åœ¨åœ¨ document ä¸­ã€‚HTML templates éå¸¸æ£’ï¼Œå› ä¸ºä¸ç®¡æˆ‘ä»¬è¿™ä¸ªè‡ªå®šä¹‰å…ƒç´ æœ‰å¤šå°‘å®ä¾‹ï¼Œå®ƒä»¬ç”¨çš„éƒ½æ˜¯åŒä¸€ä¸ª templateã€‚</p>
<p>ç°åœ¨æˆ‘ä»¬å·²ç»çŸ¥é“äº† Web Components åˆ©ç”¨äº†å“ªäº› Web è§„èŒƒï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹è‡ªå®šä¹‰å…ƒç´ çš„ç”Ÿå‘½å‘¨æœŸã€‚åˆ«æ€¥ï¼Œåˆ«æ€¥ï¼Œæˆ‘ä»¬é©¬ä¸Šå°±è¦å¼€å§‹å†™ä»£ç äº†ï¼</p>
<h2 id="ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ"><a href="#ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ"></a>ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ</h2><p>æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹è‡ªå®šä¹‰å…ƒç´ çš„ç”Ÿå‘½å‘¨æœŸã€‚ä»¥ä¸‹é¢çš„å…ƒç´ ä¸ºä¾‹ï¼š</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyElement</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HTMLElement</span> </span>&#123;</span><br><span class="line">    <span class="hljs-keyword">constructor</span>() &#123;</span><br><span class="line">        <span class="hljs-comment">// åŠ¡å¿…å…ˆè°ƒç”¨ super()</span></span><br><span class="line">        <span class="hljs-keyword">super</span>(); </span><br><span class="line">        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'constructed!'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    connectedCallback() &#123;</span><br><span class="line">        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'connected!'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    disconnectedCallback() &#123;</span><br><span class="line">        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'disconnected!'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    attributeChangedCallback(name, oldVal, newVal) &#123;</span><br><span class="line">        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`Attribute: <span class="hljs-subst">$&#123;name&#125;</span> changed!`</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    adoptedCallback() &#123;</span><br><span class="line">        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'adopted!'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-built_in">window</span>.customElements.define(<span class="hljs-string">'my-element'</span>, MyElement);</span><br></pre></td></tr></table></figure>
<h3 id="constructor-NaN"><a href="#constructor-NaN" class="headerlink" title="constructor()"></a>constructor()</h3><p><code>constructor</code> ä¼šåœ¨å…ƒç´ åˆ›å»ºåè€Œå°šæœªè¢«é™„åŠ åˆ°æ–‡æ¡£ä¸Š<em>ä¹‹å‰</em>è¢«è°ƒç”¨ã€‚æˆ‘ä»¬ç”¨ <code>constructor</code> æ¥è®¾ç½®åˆå§‹çŠ¶æ€ã€äº‹ä»¶ç›‘å¬ä»¥åŠ shadow DOMã€‚</p>
<h3 id="connectCallback"><a href="#connectCallback" class="headerlink" title="connectCallback()"></a>connectCallback()</h3><p><code>connectCallback</code> ä¼šåœ¨å…ƒç´ è¢«æ·»åŠ åˆ° DOM ä¸­åè¢«è°ƒç”¨ã€‚æ­¤æ—¶éå¸¸é€‚åˆæ‰§è¡Œåˆå§‹åŒ–ä»£ç ï¼Œæ¯”å¦‚è·å–æ•°æ®æˆ–æ˜¯è®¾ç½®é»˜è®¤å±æ€§ã€‚</p>
<h3 id="disconnectedCallback"><a href="#disconnectedCallback" class="headerlink" title="disconnectedCallback()"></a>disconnectedCallback()</h3><p><code>disconnectedCallback()</code> ä¼šåœ¨å…ƒç´ ä» DOM ä¸­è¢«ç§»é™¤åè°ƒç”¨ã€‚å¤§æ‰«é™¤æ—¶é—´ï¼æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ <code>disconnectedCallback</code> æ¥ç§»é™¤äº‹ä»¶ç›‘å¬å™¨æˆ–å–æ¶ˆå®šæ—¶å¾ªç¯äº‹ä»¶ã€‚</p>
<h3 id="attributeChangedCallback-name-oldValue-newBalue"><a href="#attributeChangedCallback-name-oldValue-newBalue" class="headerlink" title="attributeChangedCallback(name, oldValue, newBalue)"></a>attributeChangedCallback(name, oldValue, newBalue)</h3><p><code>attributeChangedCallback</code> ä¼šåœ¨å…ƒç´ çš„<em>å—ç›‘çš„æ§å±æ€§</em>å˜åŠ¨æ—¶è¢«è°ƒç”¨ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡è®¾ç½® <code>observedAttributes</code> getter æ¥ç›‘æ§æŸä¸ªå…ƒç´ å±æ€§ï¼Œåƒè¿™æ ·ï¼š</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">static</span> <span class="hljs-keyword">get</span> observedAttributes() &#123;</span><br><span class="line">    <span class="hljs-keyword">return</span> [<span class="hljs-string">'my-attr'</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæ¯å½“ <code>my-attr</code> å±æ€§å‘ç”Ÿå˜åŒ–ï¼Œ<code>attributeChangedCallback</code> å°±ä¼šæ‰§è¡Œã€‚æœ¬æ–‡åé¢å°†ä¼šè¯¦ç»†è®²è§£ã€‚</p>

    
    </div>
    
    
</article>




    
        <article class="article content gallery" itemscope="" itemprop="blogPost">
    <h1 class="article-title is-size-3 is-size-4-mobile" itemprop="name">
        
            <a href="/2019/03/31/sw-in-5m/" itemprop="url">ã€Œè¯‘ã€5 åˆ†é’Ÿä¸Šæ‰‹ Service Worker</a>
        
    </h1>
    <div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile">
        <span class="column is-narrow">
            <time datetime="2019-03-31T04:28:59.000Z" itemprop="datePublished">3æœˆ 31 2019</time>
        </span>
        
        
        <span class="column is-narrow">
            
            
            9 åˆ†é’Ÿ è¯»å®Œ (çº¦ 1372 å­—)
        </span>
        
    </div>
    <div class="article-entry is-size-6-mobile" itemprop="articleBody">
    
        <p><strong><em>ä½œè€…ï¼š<a href="https://carmalou.com/" target="_blank" rel="noopener">Carmen Bourlon</a></em></strong><br><strong><em>åŸæ–‡é“¾æ¥ï¼š<a href="https://davidwalsh.name/write-your-first-service-worker-in-5-minutes" target="_blank" rel="noopener">Write Your First Service Worker in 5 Minutes</a></em></strong></p>
<h2 id="ä»€ä¹ˆæ˜¯-Service-Worker"><a href="#ä»€ä¹ˆæ˜¯-Service-Worker" class="headerlink" title="ä»€ä¹ˆæ˜¯ Service Worker?"></a>ä»€ä¹ˆæ˜¯ Service Worker?</h2><p>Service Worker æ˜¯ä¸€ä¸ªè®©ä½ å¯ä»¥åœ¨ç”¨æˆ·æœºå™¨ä¸Šç¼“å­˜æ–‡ä»¶å’Œå…¶ä»–èµ„æºçš„å°æ–‡ä»¶ã€‚é‚£å®ƒè·ŸæœåŠ¡å™¨ç«¯ç¼“å­˜ (server-side caching) æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿè¿™ç§ç¼“å­˜æ˜¯æ”¾åœ¨ç”¨æˆ·çš„æœºå™¨ä¸Šçš„ï¼Œå› æ­¤è·ŸæœåŠ¡å™¨ç«¯çš„ç¼“å­˜ç›¸æ¯”ï¼Œå®ƒä¸éœ€è¦å†é€šè¿‡ç½‘ç»œä¼ è¾“ã€‚è¿™å¯¹æå‡ä½ çš„åº”ç”¨çš„é€Ÿåº¦å’Œå¯é æ€§æ˜¯éå¸¸æœ‰å¥½å¤„çš„ã€‚ç”±äº app æ˜¯ä»ç¼“å­˜ä¸­è¿è¡Œçš„ï¼Œå°±ä¸ç”¨å¤§è´¹å‘¨ç« çš„èŠ±æ—¶é—´ä»ç½‘ç»œä¼ è¾“æ•°æ®äº†ã€‚</p>
<h2 id="ä¸ºä»€ä¹ˆè¯´å®ƒå¯¹ä½ çš„åº”ç”¨æœ‰å¥½å¤„"><a href="#ä¸ºä»€ä¹ˆè¯´å®ƒå¯¹ä½ çš„åº”ç”¨æœ‰å¥½å¤„" class="headerlink" title="ä¸ºä»€ä¹ˆè¯´å®ƒå¯¹ä½ çš„åº”ç”¨æœ‰å¥½å¤„"></a>ä¸ºä»€ä¹ˆè¯´å®ƒå¯¹ä½ çš„åº”ç”¨æœ‰å¥½å¤„</h2><p>åº”ç”¨ Service Worker ä¸ä»…èƒ½æå‡åº”ç”¨çš„é€Ÿåº¦ï¼Œè¿˜èƒ½ä¸ºä½ çš„ç”¨æˆ·æä¾›å‰æ‰€æœªæœ‰çš„å¯é æ€§ã€‚ç”±äºä¸å†ä¾èµ–å®æ—¶çš„ç½‘ç»œè¿æ¥ï¼Œåº”ç”¨åœ¨ç½‘ç»œè´¨é‡å·®çš„æ—¶å€™ä¹Ÿèƒ½å·¥ä½œ--è¯´çœŸçš„<em>æ‰€æœ‰äºº</em>çš„ç½‘ç»œè´¨é‡éƒ½ä¸å’‹çš„ã€‚</p>
<h2 id="ç”Ÿå‘½å‘¨æœŸ"><a href="#ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="ç”Ÿå‘½å‘¨æœŸ"></a>ç”Ÿå‘½å‘¨æœŸ</h2><p>Service Worker ç”Ÿå‘½å‘¨æœŸåŸºæœ¬æ˜¯è¿™æ ·ï¼š</p>
<ol>
<li>install</li>
<li>Activate</li>
<li>Fetch</li>
</ol>
<p>æˆ‘ä»¬æ¥åˆ†åˆ«è®²è§£ä¸€ä¸‹è¿™äº›äº‹ä»¶ï¼š</p>
<h3 id="Install"><a href="#Install" class="headerlink" title="Install"></a>Install</h3><p>åœ¨ install äº‹ä»¶ä¹‹å‰ï¼Œä½ çš„åº”ç”¨é‡Œè¿˜æ²¡æœ‰ Service Workerã€‚æµè§ˆå™¨ä¼šä»ä½ çš„ä»£ç ä¸­æ£€æµ‹æ³¨å†Œäº‹ä»¶å¹¶å®‰è£… Service Workerã€‚ä½ çš„ Service Worker åŒ…å«ä¸€ä¸ªåä¸º <code>oninstall</code> çš„å‡½æ•°ï¼Œå®ƒå°†å†³å®šå“ªäº›æ–‡ä»¶ä¼šè¢«ç¼“å­˜åˆ°ç”¨æˆ·çš„æœºå™¨ä¸Šã€‚</p>
<h3 id="Activate"><a href="#Activate" class="headerlink" title="Activate"></a>Activate</h3><p>åœ¨ Service Worker å®‰è£…å°±ç»ªä»¥åï¼Œä¼šè§¦å‘ activate äº‹ä»¶ã€‚æ­¤æ—¶æ˜¯æ¸…ç†è€æ—§æ— ç”¨çš„ç¼“å­˜æ–‡ä»¶çš„å¥½æ—¶æœºã€‚ä¸è¿‡åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å¹¶ä¸ä¼šåœ¨ activate äº‹ä»¶é‡Œåšä»»ä½•æ“ä½œã€‚</p>
<h3 id="Fetch"><a href="#Fetch" class="headerlink" title="Fetch"></a>Fetch</h3><p>è¿™æ˜¯æˆ‘ä»¬çš„ Service Worker å¤§æ˜¾èº«æ‰‹çš„æ—¶å€™ã€‚å½“åº”ç”¨å‘å‡º fetch è¯·æ±‚æ—¶ï¼Œæˆ‘ä»¬çš„ Service Worker ä¼šç”¨ä¸€ä¸ªåå­—ä¹Ÿæ˜¯ <code>fetch</code> çš„å‡½æ•°æ‹¦æˆªå®ƒã€‚ä½ çš„ Service Worker ä¼šä»æ¢ä»ä¸­å¯»æ‰¾ç±»ä¼¼çš„è¯·æ±‚æˆ–æ˜¯å°†è¿™ä¸ªè¯·æ±‚å‘é€å‡ºå»ã€‚</p>
<p>Service Worker ç”Ÿå‘½å‘¨æœŸä¸­ activate å’Œ fetch å¹¶ä¸æ˜¯ä¾æ¬¡æ‰§è¡Œçš„ã€‚Fetch åªæœ‰åœ¨æœ‰ fetch æ“ä½œæ—¶æ‰æ‰§è¡Œæ‹¦æˆªï¼Œå› æ­¤ activate äº‹ä»¶å’Œ ftech äº‹ä»¶ä¹‹é—´æ˜¯æœ‰é—´éš”çš„ã€‚åœ¨è¿™é—´éš”æœŸé—´ï¼ŒService Worker å¤„äºå¾…å‘½çŠ¶æ€ã€‚</p>
<h2 id="Service-Worker-ç¤ºä¾‹"><a href="#Service-Worker-ç¤ºä¾‹" class="headerlink" title="Service Worker ç¤ºä¾‹"></a>Service Worker ç¤ºä¾‹</h2><p>æˆ‘ä»¬ç”¨ <a href="https://github.com/carmalou/fayePI" target="_blank" rel="noopener">FayePI</a> æ¥åšä¾‹å­ã€‚è¿™æ˜¯æˆ‘å†™çš„ä¸€ä¸ªå¸®åŠ©å¥³æ€§å­¦ä¹ å»ºè®¾åŠ¨æ€ç½‘ç«™çš„ APIï¼Œå®ƒçš„æ–‡æ¡£é¡µé¢ç”¨äº†ä¸€ç‚¹ç®€å•çš„ Service Workerã€‚</p>
<p>ä¸ºäº†å®‰è£… Service Workerï¼Œæˆ‘ä»¬å¾—å…ˆä¸ºåº”ç”¨æ·»åŠ ä¸€ä¸ªæ³¨å†Œå‡½æ•°ã€‚</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// index.js</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">if</span>(navigator.serviceWorker) &#123;</span><br><span class="line">      navigator.serviceWorker.register(<span class="hljs-string">'serviceworker.js'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢è¿™æ®µä»£ç é€šå¸¸æ”¾åœ¨ <code>index.js</code> ä¸­ä»¥ä¾¿åœ¨é¡µé¢åŠ è½½å®Œæˆåç«‹å³æ‰§è¡Œã€‚åœ¨ä½ çš„åº”ç”¨ä»£ç ä¸­ï¼Œè¿™æ˜¯å”¯ä¸€å¼•ç”¨ Service Worker çš„åœ°æ–¹ã€‚</p>
<p>ä¸‹é¢æ˜¯æˆ‘ä»¬çš„ Service Worker æ–‡ä»¶ã€‚</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// serviceworker.js</span></span><br><span class="line"></span><br><span class="line">self.oninstall = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">    caches.open(<span class="hljs-string">'fayeFrontEndV1'</span>).then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">cache</span>) </span>&#123;</span><br><span class="line">        cache.addAll([ <span class="hljs-regexp">/ ... /</span> ])</span><br><span class="line">        .catch( <span class="hljs-regexp">/ ... /</span> );</span><br><span class="line">    &#125;)</span><br><span class="line">    .catch( <span class="hljs-regexp">/ ... /</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™äº›å°±æ˜¯å®‰è£… Sercice Worker æ—¶æ‰§è¡Œçš„ä»£ç ã€‚é¦–å…ˆæˆ‘ä»¬åˆå§‹åŒ–å¹¶æ‰“å¼€ cacheã€‚æˆ‘ä»¬åœ¨è¿™é‡Œå°†æ–‡ä»¶ç¼“å­˜åˆ°ç”¨æˆ·æœºå™¨ä¸Šã€‚</p>
<p><code>caches.open</code> è¿”å›ä¸€ä¸ªåŒ…å«æˆ‘ä»¬æ‰“å¼€çš„ cache çš„å¼•ç”¨çš„ promiseã€‚ç„¶åæˆ‘ä»¬ä¼ ç»™ <code>addAll</code> å‡½æ•°ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ã€‚è¿™äº›å­—ç¬¦ä¸²æ˜¯æˆ‘ä»¬è¦æ·»åŠ åˆ°ç¼“å­˜çš„æ–‡ä»¶çš„è·¯å¾„ã€‚æœ€åæˆ‘ä»¬æ·»åŠ å‡ ä¸ª <code>catch</code> å‡½æ•°æ¥å¤„ç†å¯èƒ½ä¼šå‡ºç°çš„é”™è¯¯ã€‚</p>
<p>ä¸‹ä¸€æ­¥æ˜¯ activate:</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// serviceworker.js</span></span><br><span class="line">self.onactivate = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) </span>&#123;</span><br><span class="line">    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'sw is up and running!'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ­¤æ—¶æ˜¯è¿›è¡Œåƒåœ¾æ¸…ç†çš„å¥½æ—¶æœºï¼Œä¸è¿‡æˆ‘ä»¬å°†åœ¨å¦ä¸€ç¯‡åšæ–‡é‡Œè®²è§£ã€‚</p>
<p>æœ€åï¼Œä¹Ÿæ˜¯æœ€æ£’çš„éƒ¨åˆ†ï¼è®©æˆ‘ä»¬æ¥çœ‹çœ‹ fetchã€‚</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// serviceworker.js</span></span><br><span class="line">self.onfetch = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) </span>&#123;</span><br><span class="line">    event.respondWith(</span><br><span class="line">        caches.match(event.request)</span><br><span class="line">        .then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">cachedFiles</span>) </span>&#123;</span><br><span class="line">            <span class="hljs-keyword">if</span>(cachedFiles) &#123;</span><br><span class="line">                <span class="hljs-keyword">return</span> cachedFiles;</span><br><span class="line">            &#125; <span class="hljs-keyword">else</span> &#123;</span><br><span class="line">                <span class="hljs-keyword">return</span> fetch(event.request);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªå‡½æ•°ä¼šåœ¨ Service Worker æ£€æµ‹åˆ° fetch è¯·æ±‚æ—¶æ‰§è¡Œã€‚å®ƒä¼šåœ¨<em>å…¨éƒ¨</em> cache ä¸­è¯•å›¾æ‰¾åˆ°åŒ¹é…çš„è¯·æ±‚ã€‚å¦‚æœåŒ¹é…æˆåŠŸï¼Œå‡½æ•°å°†è¿”å› cache ä¸­çš„ç»“æœã€‚å¦åˆ™ Service Worker ä¼šå‘é€ç½‘ç»œè¯·æ±‚ã€‚</p>
<p>è®©æˆ‘ä»¬ä»”ç»†åˆ†æä¸€ä¸‹ <code>event.respondWith</code> å’Œ <code>caches.match</code>ï¼Œè¿™ä¿©éƒ½æ˜¯ Service Worker ä¸“æœ‰çš„ã€‚</p>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/API/FetchEvent/respondWith" target="_blank" rel="noopener"><code>event.respondWith</code></a> è®©ä½ å¯ä»¥æ‰“æ–­ fetch è¯·æ±‚å¹¶è¿”å›ä½ è‡ªå·±çš„å“åº”å†…å®¹ã€‚ä¸€å®šè¦æ³¨æ„å¿…é¡»ç”¨è¿™ä¸ªæ–¹æ³•è€Œä¸æ˜¯ç®€å•çš„ return ä¸€ä¸ªè¿”å›å€¼ï¼Œåªæœ‰è¿™æ ·ä½ æ‹¦æˆªçš„å›å¤æ‰èƒ½å‘é€åˆ°æ­£ç¡®çš„åœ°æ–¹ã€‚</p>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Cache/match" target="_blank" rel="noopener"><code>caches.match</code></a> è®©ä½ èƒ½å¤Ÿæœç´¢ <a href="https://davidwalsh.name/carmalou/service-worker-example/blob/master/link" target="_blank" rel="noopener">CacheStorage</a> å¹¶æ‰¾åˆ°è¯·æ±‚çš„åŒ¹é…é¡¹ã€‚æˆ‘ä»¬å‘ cache æ·»åŠ çš„å†…å®¹ï¼Œä¼šè¢«å­˜å‚¨åˆ°ä¸€ä¸ªæ ˆä¸­ï¼Œæœ€æ—©æ·»åŠ çš„åœ¨æœ€åº•éƒ¨ï¼Œæœ€åæ·»åŠ çš„åœ¨é¡¶éƒ¨ã€‚<code>caches.match</code> ä¼šè¿”å›æœ€æ–°çš„åŒ¹é…é¡¹ã€‚å¦‚æœæ²¡æœ‰åŒ¹é…é¡¹ï¼Œåˆ™è¿”å› nullã€‚</p>
<p>å¤§åŠŸå‘Šæˆï¼ä»¥ä¸Šå°±æ˜¯ä¸€ä¸ªç®€å•çš„ Service Worker çš„å…¨éƒ¨å†…å®¹ï¼å¦‚æœä½ è§‰å¾— Service Worker è¶…çº§é…·ï¼Œæˆ‘æ¨èä½ äº†è§£ä¸€ä¸‹å®ƒè¿˜èƒ½åšä»€ä¹ˆï¼ŒåŒ…æ‹¬åå° fetchï¼Œ<a href="https://davidwalsh.name/background-sync" target="_blank" rel="noopener">åœ¨è¿™ç¯‡åšå®¢ä¸­</a>ã€‚</p>
<p><em>å¦‚æœä½ æƒ³å­¦ä¹ æ›´å¤šå…³äº Service Worker çš„çŸ¥è¯†ï¼Œæˆ‘å¸Œæœ›ä½ èƒ½å» <a href="http://serviceworkerbook.com/" target="_blank" rel="noopener">serviceworkerbook.com</a> å¹¶è®¢é˜…æˆ‘çš„é‚®ä»¶åˆ—è¡¨ï¼Œå¹¶åœ¨ Twitter å…³æ³¨æˆ‘ï¼ä½ ä¼šåœ¨æˆ‘çš„ä¹¦ â€œLetâ€™s Take This Offlineâ€ å‡ºç‰ˆçš„ç¬¬ä¸€æ—¶é—´è·æ‚‰ï¼</em></p>

    
    </div>
    
    
</article>




    
        <article class="article content gallery" itemscope="" itemprop="blogPost">
    <h1 class="article-title is-size-3 is-size-4-mobile" itemprop="name">
        
            <a href="/2019/03/27/single-file-web-components/" itemprop="url">ã€Œè¯‘ã€åŠ¨æ‰‹å®ç°ä¸€ä¸ªå•æ–‡ä»¶ Web Components</a>
        
    </h1>
    <div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile">
        <span class="column is-narrow">
            <time datetime="2019-03-27T15:02:12.000Z" itemprop="datePublished">3æœˆ 27 2019</time>
        </span>
        
        
        <span class="column is-narrow">
            
            
            31 åˆ†é’Ÿ è¯»å®Œ (çº¦ 4709 å­—)
        </span>
        
    </div>
    <div class="article-entry is-size-6-mobile" itemprop="articleBody">
    
        <p><strong><em>ä½œè€…ï¼š<a href="https://medium.com/@ComandeerPL" target="_blank" rel="noopener">Tomasz Jakut</a></em></strong><br><strong><em>åŸæ–‡é“¾æ¥ï¼š<a href="https://medium.com/content-uneditable/implementing-single-file-web-components-22adeaa0cd17" target="_blank" rel="noopener">Implementing single file Web Components</a></em></strong></p>
<p><img src="/pictures/3-single-file-components/headimg.png" alt=""></p>
<p>å¯èƒ½æ¯ä¸ªäº†è§£ Vue æ¡†æ¶çš„äººéƒ½å¬è¯´è¿‡å®ƒçš„â€œå•æ–‡ä»¶ç»„ä»¶ï¼ˆsingle file componentsï¼‰â€ã€‚è¿™ä¸ªè¶…ç®€å•çš„æ¦‚å¿µè®© Web å¼€å‘äººå‘˜å¯ä»¥åªç”¨ä¸€ä¸ªæ–‡ä»¶æ¥å®šä¸€ä¸ªç»„ä»¶ã€‚è¿™ä¸ªè§£å†³æ–¹æ¡ˆéå¸¸å¥½ç”¨ä»¥è‡³äº<a href="https://github.com/TheLarkInn/unity-component-specification" target="_blank" rel="noopener">ä¸€ä¸ªåœ¨æµè§ˆå™¨ä¸­åŒ…å«è¿™ç§æœºåˆ¶çš„ææ¡ˆ</a>å·²ç»å‡ºç°ã€‚</p>
<p>ä¸è¿‡å¾ˆä¸å¹¸çš„æ˜¯ï¼Œè¿™ä¸ªææ¡ˆè²Œä¼¼å·²ç»æ­»æ‰äº†ï¼Œä» 2017 å¹´ 8 æœˆä»¥åå°±å†æ²¡æœ‰ä»»ä½•è¿›å±•ã€‚å³ä½¿å¦‚æ­¤ï¼Œåœ¨ç°æœ‰å¯è¡ŒæŠ€æœ¯ä¸‹ç ”ç©¶è¿™ä¸ªè¯é¢˜å¹¶ä¸”åˆ›å»ºä¸€ä¸ªå¯ä»¥åœ¨æµè§ˆå™¨ä¸­è¿è¡Œçš„å•æ–‡ä»¶ç»„ä»¶ä»ç„¶å€¼å¾—å†™ä¸€ç¯‡æ–‡ç« ï¼</p>
<h2 id="å•æ–‡ä»¶ç»„ä»¶"><a href="#å•æ–‡ä»¶ç»„ä»¶" class="headerlink" title="å•æ–‡ä»¶ç»„ä»¶"></a>å•æ–‡ä»¶ç»„ä»¶</h2><p>äº†è§£<a href="https://www.smashingmagazine.com/2009/04/progressive-enhancement-what-it-is-and-how-to-use-it/" target="_blank" rel="noopener">æ¸è¿›å¢å¼º</a>è¿™ä¸ªæœ¯è¯­çš„ Web å¼€å‘äººå‘˜åº”è¯¥ä¹Ÿå¬è¯´è¿‡â€œåˆ†å±‚â€è¿™ä¸ªè¯å„¿ã€‚åœ¨ç»„ä»¶ä¸­ä¹Ÿæ˜¯è¿™æ ·çš„ã€‚å®é™…ä¸Šå±‚æ•°è¿˜ä¸å°‘å‘¢ï¼Œæ¯ä¸ªç»„ä»¶è‡³å°‘æœ‰ 3 å±‚ï¼šå†…å®¹/æ¨¡ç‰ˆï¼Œæ ·å¼å’Œè¡Œä¸ºã€‚æŒ‰ç…§ä¼ ç»Ÿçš„åšæ³•ï¼Œæ¯ä¸ªç»„ä»¶è‡³å°‘ä¼šè¢«åˆ†æˆ 3 ä¸ªæ–‡ä»¶ï¼Œä¾‹å¦‚ä¸€ä¸ª Button ç»„ä»¶å¯èƒ½ä¼šæ˜¯è¿™ä¸ªæ ·å­ï¼š</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Button/</span><br><span class="line">|</span><br><span class="line">| -- Button.html</span><br><span class="line">|</span><br><span class="line">| -- Button.css</span><br><span class="line">|</span><br><span class="line">| -- Button.js</span><br></pre></td></tr></table></figure>
<p>è¿™æ˜¯æŒ‰ç…§æŠ€æœ¯æ¥åˆ†å±‚ï¼ˆå†…å®¹/æ¨¡ç‰ˆï¼šHTMLï¼Œæ ·å¼ï¼šCSSï¼Œè¡Œä¸ºï¼šJSï¼‰ã€‚è¿™å°±æ˜¯è¯´--å¦‚æœä½ æ²¡æœ‰ç”¨æ„å»ºå·¥å…·çš„è¯--æµè§ˆå™¨å°†éœ€è¦åŠ è½½ 3 ä¸ªæ–‡ä»¶ã€‚äºæ˜¯æœ‰äººä¾¿æå‡ºä¸€ä¸ªæ¦‚å¿µï¼Œä¿ç•™åˆ†å±‚çš„æ¦‚å¿µï¼Œä½†ä¸æ˜¯æŒ‰ç…§æŠ€æœ¯ç§ç±»åˆ†æˆä¸åŒä½†æ–‡ä»¶ã€‚äºæ˜¯å•æ–‡ä»¶ç»„ä»¶è¯ç”Ÿäº†ã€‚</p>
<p>ä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘å¯¹â€œæŒ‰æŠ€æœ¯åˆ†å±‚â€è¿™ä¸ªåšæ³•æŒæ€€ç–‘æ€åº¦ã€‚è€Œä¸”ï¼Œè¿™ä¸ªæ¦‚å¿µå®é™…ä¸Šç»å¸¸åœ¨ä¸€äº›<a href="https://medium.com/@hayavuk/regardless-of-how-it-relates-to-styled-components-which-i-could-not-care-less-about-this-1c75825582d0" target="_blank" rel="noopener">å…³äºæ”¾å¼ƒåˆ†å±‚çš„äº‰è®ºä¸­</a>è¢«æåˆ°--æ ¹æœ¬å°±æ˜¯å®Œå…¨å¯¹ç«‹çš„ä¸¤ä»¶äº‹ã€‚</p>
<p>å•æ–‡ä»¶çš„ Button ç»„ä»¶çœ‹èµ·æ¥æ˜¯è¿™æ ·çš„ï¼š</p>
<figure class="highlight html hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span></span><br><span class="line">	<span class="hljs-comment">&lt;!-- Button.html contents go here. --&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="hljs-undefined"></span></span><br><span class="line"><span class="hljs-css">	<span class="hljs-comment">/* Button.css contents go here. */</span></span></span><br><span class="line"><span class="hljs-undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="hljs-undefined"></span></span><br><span class="line"><span class="hljs-javascript">	<span class="hljs-comment">// Button.js contents go here.</span></span></span><br><span class="line"><span class="hljs-undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å¯ä»¥æ¸…æ¥šçš„çœ‹åˆ°ï¼Œå•æ–‡ä»¶ç»„ä»¶å°±æ˜¯ä¸€ä¸ªæœ‰å†…éƒ¨æ ·å¼è¡¨ã€script å’Œ <code>&lt;template&gt;</code> æ ‡ç­¾çš„æ ‡å‡† HTMLã€‚å¾—ç›Šäºè¿™ç§ç®€æ´çš„å®ç°ï¼Œä½ çš„ç»„ä»¶ä¸éœ€è¦åˆ†æˆå¤šä¸ªæ–‡ä»¶ä¹Ÿæœ‰å¾ˆæ˜æ˜¾çš„åˆ†å±‚ï¼ˆå†…å®¹/æ¨¡ç‰ˆï¼š<code>&lt;template&gt;</code>ï¼Œæ ·å¼ï¼š<code>&lt;style&gt;</code>ï¼Œè¡Œä¸ºï¼š<code>&lt;script&gt;</code> ï¼‰ã€‚</p>
<p>ä¸è¿‡ä»ç„¶åˆä¸€ä¸ªæœ€é‡è¦çš„é—®é¢˜è¦è§£å†³ï¼šå¦‚ä½•ä½¿ç”¨å®ƒå‘¢ï¼Ÿ</p>
<h2 id="åŸºç¡€æ¦‚å¿µ"><a href="#åŸºç¡€æ¦‚å¿µ" class="headerlink" title="åŸºç¡€æ¦‚å¿µ"></a>åŸºç¡€æ¦‚å¿µ</h2><p>æˆ‘ä»¬å…ˆæ¥ç¼–å†™ä¸€ä¸ªå«åš <code>loadComponent()</code> çš„ <em>å…¨å±€</em>å‡½æ•°æ¥åŠ è½½æˆ‘ä»¬çš„ç»„ä»¶ã€‚</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-built_in">window</span>.loadComponent = ( <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">loadComponent</span>(<span class="hljs-params"> URL </span>) </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">	<span class="hljs-keyword">return</span> loadComponent;</span><br><span class="line">&#125;() );</span><br></pre></td></tr></table></figure>
<p>æˆ‘ç”¨åˆ°äº†è¿™äº›<a href="https://addyosmani.com/resources/essentialjsdesignpatterns/book/#modulepatternjavascript" target="_blank" rel="noopener">ç»„ä»¶æ¨¡å¼</a>ã€‚ä½ å¯ä»¥å®šä¹‰æ‰€æœ‰éœ€è¦çš„è¾…åŠ©å‡½æ•°ï¼ŒåªæŠŠ <code>loadComponent</code> æš´éœ²ç»™å¤–éƒ¨ä½œç”¨åŸŸã€‚ç›®å‰è¿™ä¸ªå‡½æ•°æ²¡æœ‰ä»»ä½•åŠŸèƒ½ã€‚</p>
<p>ç„¶è€Œæˆ‘ä»¬ä¹Ÿæ²¡ä»€ä¹ˆä¸œè¥¿éœ€è¦åŠ è½½ï¼Œæ‰€ä»¥è¿™ä¹Ÿä¸æ˜¯ä»€ä¹ˆé—®é¢˜ã€‚åœ¨è¿™ç¯‡æ–‡ç« é‡Œæˆ‘ä»¬å‡è®¾ä½ è¦åˆ›å»ºä¸€ä¸ª <code>&lt;hello-world&gt;</code> ç»„ä»¶ç”¨äºæ˜¾ç¤ºä»¥ä¸‹æ–‡å­—ï¼š</p>
<blockquote>
<p><em>Hello, world! My name is &lt;æŒ‡å®šçš„åç§°&gt;.</em></p>
</blockquote>
<p>è€Œä¸”å½“ä½ ç‚¹å‡»äº†è¿™ä¸ªç»„ä»¶ï¼Œå®ƒä¼šå¼¹å‡ºä¸€ä¸ªæ¶ˆæ¯ï¼š</p>
<blockquote>
<p><em>Donâ€™t touch me!</em></p>
</blockquote>
<p>æŠŠç»„ä»¶ä»£ç ä¿å­˜ä¸º <code>HelloWorld.wc</code>ï¼ˆ<code>.wc</code> ä»£è¡¨ Web Componentï¼‰ã€‚ç°é˜¶æ®µå®ƒæ˜¯è¿™æ ·çš„ï¼š</p>
<figure class="highlight html hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span></span><br><span class="line">	<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"hello"</span>&gt;</span></span><br><span class="line">		<span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Hello, world! My name is <span class="hljs-tag">&lt;<span class="hljs-name">slot</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">slot</span>&gt;</span>.<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="line">	<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="hljs-undefined"></span></span><br><span class="line"><span class="hljs-undefined">	div &#123;</span></span><br><span class="line"><span class="hljs-undefined">		background: red;</span></span><br><span class="line"><span class="hljs-undefined">		border-radius: 30px;</span></span><br><span class="line"><span class="hljs-undefined">		padding: 20px;</span></span><br><span class="line"><span class="hljs-undefined">		font-size: 20px;</span></span><br><span class="line"><span class="hljs-undefined">		text-align: center;</span></span><br><span class="line"><span class="hljs-undefined">		width: 300px;</span></span><br><span class="line"><span class="hljs-undefined">		margin: 0 auto;</span></span><br><span class="line"><span class="hljs-undefined">	&#125;</span></span><br><span class="line"><span class="hljs-undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="hljs-undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ç°åœ¨ä½ è¿˜æ²¡æœ‰ä¸ºå®ƒæ·»åŠ ä»»ä½•åŠŸèƒ½ã€‚åªæ˜¯å®šä¹‰äº†å®ƒçš„æ¨¡ç‰ˆå’Œæ ·å¼ã€‚ä½¿ç”¨æ²¡æœ‰ä»»ä½•é€‰æ‹©å™¨çš„ <code>div</code> ä»¥åŠ <code>&lt;slot&gt;</code> å…ƒç´ çš„å‡ºç°æ„å‘³ç€è¿™ä¸ªç»„ä»¶å°†ä½¿ç”¨ <a href="https://developer.mozilla.org/en-US/docs/Web/Web_Components/Using_shadow_DOM" target="_blank" rel="noopener">Shadow DOM</a>ã€‚ç¡®å®å¦‚æ­¤ï¼šæ‰€æœ‰çš„æ ·å¼å’Œæ¨¡ç‰ˆé»˜è®¤éƒ½ä¼šè¢«éšè—åœ¨æš—å¤„ã€‚</p>
<p>ç»„ä»¶åœ¨ç½‘ç«™ä¸Šçš„ä½¿ç”¨æ–¹å¼åº”è¯¥å°½å¯èƒ½çš„ç®€å•ï¼š</p>
<figure class="highlight html hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-tag">&lt;<span class="hljs-name">hello-world</span>&gt;</span>Comandeer<span class="hljs-tag">&lt;/<span class="hljs-name">hello-world</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"loader.js"</span>&gt;</span><span class="hljs-undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="hljs-undefined"></span></span><br><span class="line"><span class="hljs-javascript">	loadComponent( <span class="hljs-string">'HelloWorld.wc'</span> );</span></span><br><span class="line"><span class="hljs-undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ç»„ä»¶çš„ç”¨æ³•è·Ÿæ ‡å‡†çš„ <a href="https://developer.mozilla.org/en-US/docs/Web/Web_Components/Using_custom_elements" target="_blank" rel="noopener">Custom Element</a> ä¸€æ ·ã€‚å”¯ä¸€çš„åŒºåˆ«æ˜¯åœ¨ä½¿ç”¨ <code>loadComponent()</code> æ–¹æ³•ä¹‹å‰éœ€è¦å…ˆåŠ è½½ä¸€ä¸ª jsï¼ˆè¿™ä¸ªæ–¹æ³•ä½äº <code>loader.js</code> æ–‡ä»¶ä¸­ï¼‰ã€‚è¿™ä¸ªæ–¹æ³•è´Ÿè´£æ‰€æœ‰çš„ç¹é‡å·¥ä½œï¼Œåƒè·å–ç»„ä»¶å’Œåœ¨ <code>customElements.define()</code> ä¸­æ³¨å†Œç»„ä»¶ã€‚</p>
<p>ä»¥ä¸Šå°±æ˜¯æ‰€æœ‰çš„åŸºç¡€æ¦‚å¿µï¼Œæ¥ä¸‹æ¥è¦å¼€å§‹åŠ¨çœŸæ ¼çš„äº†ï¼</p>
<h2 id="åŸºç¡€-loader"><a href="#åŸºç¡€-loader" class="headerlink" title="åŸºç¡€ loader"></a>åŸºç¡€ loader</h2><p>å¦‚æœä½ æƒ³ä»å¤–éƒ¨æ–‡ä»¶ä¸­åŠ è½½æ•°æ®ï¼Œä½ å¿…é¡»ä½¿ç”¨ç¥åœ£çš„ Ajaxã€‚ç„¶è€Œå¦‚ä»Šå·²ç»æ˜¯ 2018 å¹´äº†ï¼Œç°åœ¨ä½ å¯ä»¥ä»¥ <a href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch" target="_blank" rel="noopener">Fetch API</a> çš„å½¢å¼ä½¿ç”¨ Ajaxï¼š</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">loadComponent</span>(<span class="hljs-params"> URL </span>) </span>&#123;</span><br><span class="line">	<span class="hljs-keyword">return</span> fetch( URL );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ¼‚äº®ï¼ä¸è¿‡ç°åœ¨ä½ åªæ˜¯è·å–äº†æ–‡ä»¶ï¼Œæ²¡æœ‰å¯¹å®ƒåšä»»ä½•æ“ä½œã€‚è·å–å®ƒçš„å†…å®¹çš„æœ€å¥½æ–¹å¼å°±æ˜¯æŠŠå®ƒè½¬æˆæ–‡å­—ï¼š</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">loadComponent</span>(<span class="hljs-params"> URL </span>) </span>&#123;</span><br><span class="line">	<span class="hljs-keyword">return</span> fetch( URL ).then( <span class="hljs-function">(<span class="hljs-params"> response </span>) =&gt;</span> &#123;</span><br><span class="line">		<span class="hljs-keyword">return</span> response.text();</span><br><span class="line">	&#125; );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç”±äºç°åœ¨ <code>loadComponent()</code> è¿”å›çš„ <code>fetch()</code> å‡½æ•°çš„ç»“æœæ˜¯ä¸€ä¸ª <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noopener"><code>Promise</code></a>ã€‚ä½ å¯ä»¥æ®æ­¤æ£€æŸ¥å†…å®¹æ˜¯å¦çœŸæ­£åŠ è½½å¹¶æ£€æŸ¥å®ƒæ˜¯ä¸æ˜¯è¢«è½¬æˆäº†æ–‡å­—ï¼š</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">loadComponent( <span class="hljs-string">'HelloWorld.wc'</span> ).then( <span class="hljs-function">(<span class="hljs-params"> component </span>) =&gt;</span> &#123;</span><br><span class="line">	<span class="hljs-built_in">console</span>.log( component );</span><br><span class="line">&#125; );</span><br></pre></td></tr></table></figure>
<p><img src="/pictures/3-single-file-components/console.png" alt="console"><br><em>Chrome console æ˜¾ç¤º HelloWorld.wc å·²ç»åŠ è½½å®Œæˆå¹¶è½¬æˆäº†çº¯æ–‡æœ¬</em></p>
<p>è¿è¡ŒæˆåŠŸï¼</p>
<h2 id="è§£æè¿”å›å€¼"><a href="#è§£æè¿”å›å€¼" class="headerlink" title="è§£æè¿”å›å€¼"></a>è§£æè¿”å›å€¼</h2><p>ä¸è¿‡ï¼Œåªæ˜¯çº¯æ–‡æœ¬å¹¶ä¸èƒ½æ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚ã€‚ä½ ç”¨ HTML å†™è¿™ä¸ªç»„ä»¶ä¸æ˜¯ä¸ºäº†<a href="https://stackoverflow.com/a/1732454" target="_blank" rel="noopener">åšé‚£äº›ä¸å…è®¸åšçš„äº‹æƒ…</a>ã€‚æ¯•ç«Ÿä½ æ˜¯åœ¨æµè§ˆå™¨é‡Œ--ä¸€ä¸ªåˆ›å»º DOM çš„ç¯å¢ƒã€‚åˆ©ç”¨å®ƒçš„åŠ›é‡ï¼</p>
<p>æµè§ˆå™¨ä¸­åˆä¸€ä¸ªå¾ˆæ£’çš„ <a href="https://developer.mozilla.org/en-US/docs/Web/API/DOMParser" target="_blank" rel="noopener"><code>DOMPaser</code></a> ç±»è®©ä½ å¯ä»¥åˆ›å»º DOM è§£æå™¨ã€‚æˆ‘ä»¬æŠŠå®ƒå®ä¾‹åŒ–ç”¨æ¥æŠŠç»„ä»¶è½¬æ¢æˆ DOMï¼š</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">return</span> fetch( URL ).then( <span class="hljs-function">(<span class="hljs-params"> response </span>) =&gt;</span> &#123;</span><br><span class="line">	<span class="hljs-keyword">return</span> response.text();</span><br><span class="line">&#125; ).then( <span class="hljs-function">(<span class="hljs-params"> html </span>) =&gt;</span> &#123;</span><br><span class="line">	<span class="hljs-keyword">const</span> parser = <span class="hljs-keyword">new</span> DOMParser(); <span class="hljs-comment">// 1</span></span><br><span class="line"></span><br><span class="line">	<span class="hljs-keyword">return</span> parser.parseFromString( html, <span class="hljs-string">'text/html'</span> ); <span class="hljs-comment">// 2</span></span><br><span class="line">&#125; );</span><br></pre></td></tr></table></figure>
<p>é¦–å…ˆåˆ›å»ºä¸€ä¸ªè§£æå™¨å®ä¾‹(1)ï¼Œç„¶åè§£æç»„ä»¶çš„æ–‡æœ¬å†…å®¹(2)ã€‚å€¼å¾—æ³¨æ„ä½ ä½¿ç”¨çš„æ˜¯ HTML æ¨¡å¼ï¼ˆ<code>&#39;text/html&#39;</code>ï¼‰ã€‚å¦‚æœå¸Œæœ›ä»£ç æ›´å¥½çš„éµå¾ª JSX è§„èŒƒæˆ–åŸç”Ÿ Vue ç»„ä»¶ï¼Œä½ å¯ä»¥ä½¿ç”¨ XML æ¨¡å¼ï¼ˆ<code>&#39;text/xml&#39;</code>ï¼‰ã€‚ä¸è¿‡è¿™æ ·ä¸€æ¥ä½ å°±è¦æ›´æ”¹ç»„ä»¶çš„ç»“æ„äº†ï¼ˆä¾‹å¦‚ï¼šå¢åŠ ä¸€ä¸ªåŒ…å«æ‰€æœ‰å†…å®¹çš„ä¸»å…ƒç´ ï¼‰ã€‚</p>
<p>ç°åœ¨å¦‚æœä½ å†æŸ¥çœ‹ <code>loadComponent()</code> çš„è¿”å›å€¼ï¼Œä½ å°†çœ‹åˆ°ä¸€ä¸ªå®Œæ•´çš„ DOM æ ‘ã€‚</p>
<p><img src="/pictures/3-single-file-components/console2.png" alt="console"><br><em>Chrome console æ˜¾ç¤º HelloWorld.wc çš„å†…å®¹å·²ç»è¢«è½¬æˆäº† DOM</em></p>
<p>æˆ‘è¯´çš„â€œå®Œæ•´çš„â€çœŸçš„æ˜¯éå¸¸å®Œæ•´ã€‚ä½ å¾—åˆ°äº†ä¸€ä¸ªå¸¦æœ‰ <code>&lt;head&gt;</code> å’Œ <code>&lt;body&gt;</code> å…ƒç´ çš„å®Œæ•´çš„ HTML æ–‡æ¡£ã€‚ä½ å¯ä»¥çœ‹åˆ°ï¼Œç»„ä»¶çš„å†…å®¹å®Œå…¨åœ¨ <code>&lt;head&gt;</code> å…ƒç´ ä¸­ã€‚è¿™æ˜¯ HTML è§£æå™¨çš„å·¥ä½œæ–¹å¼å¯¼è‡´çš„ã€‚<a href="https://html.spec.whatwg.org/multipage/parsing.html#tree-construction" target="_blank" rel="noopener">å»ºç«‹ DOM æ ‘çš„åŸç†</a>åœ¨ HTML LS è§„èŒƒä¸­æœ‰è¯¦ç»†çš„æè¿°ã€‚å¤ªé•¿äº†å°±ä¸è¯¦ç»†è¯´äº†ï¼Œä½ å¯ä»¥ç®€å•çš„è®¤ä¸ºè§£æå™¨ä¼šæŠŠæ‰€æœ‰å…ƒç´ éƒ½æ”¾åœ¨ <code>&lt;head&gt;</code> å…ƒç´ ä¸­ï¼Œç›´åˆ°å®ƒé‡åˆ°äº†åªèƒ½æ”¾åœ¨ <code>&lt;body&gt;</code> ä¸­çš„å…ƒç´ ã€‚ä½ ç”¨åˆ°çš„æ‰€æœ‰å…ƒç´ ï¼ˆ<code>&lt;template&gt;</code>ï¼Œ<code>&lt;style&gt;</code>ï¼Œ<code>&lt;script&gt;</code>ï¼‰éƒ½å…è®¸æ”¾åœ¨ <code>&lt;head&gt;</code> ä¸­ã€‚å‡å¦‚ä½ åœ¨ç»„ä»¶çš„å¼€å¤´æ·»åŠ äº†ä¸€ä¸ªç©ºçš„ <code>&lt;p&gt;</code> æ ‡ç­¾ï¼Œé‚£ä¹ˆå…¨éƒ¨å†…å®¹éƒ½ä¼šè¢«æ¸²æŸ“åœ¨ <code>&lt;body&gt;</code> ä¸­ã€‚</p>
<p>å¦ç‡çš„è¯´ï¼Œè¿™ä¸ªç»„ä»¶æ˜¯è¢«å½“ä½œæœ‰ç¼ºé™·çš„ HTML æ–‡æ¡£æ¥å¤„ç†çš„ï¼Œå› ä¸ºå®ƒæ²¡æœ‰ä»¥ <code>DOCTYPE</code> å£°æ˜å¼€å¤´ã€‚å› æ­¤å®ƒæ˜¯åœ¨ä¸€ä¸ªè¢«ç§°ä¸º <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Quirks_Mode_and_Standards_Mode" target="_blank" rel="noopener">quirks mode</a> çš„æ¨¡å¼ä¸‹æ¸²æŸ“çš„ã€‚å¥½åœ¨è¿™å¯¹ä½ æ²¡ä»€ä¹ˆå½±å“ï¼Œå› ä¸ºä½ åªæ˜¯ç”¨ DOM è§£æå™¨å‰ªåˆ‡å‡ºæ‰€éœ€çš„ç»„ä»¶å†…å®¹ã€‚</p>
<p>æœ‰äº† DOM æ ‘ï¼Œä½ èƒ½è·å–ä½ æ‰€éœ€çš„é‚£éƒ¨åˆ†å…ƒç´ ï¼š</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">return</span> fetch( URL ).then( <span class="hljs-function">(<span class="hljs-params"> response </span>) =&gt;</span> &#123;</span><br><span class="line">	<span class="hljs-keyword">return</span> response.text();</span><br><span class="line">&#125; ).then( <span class="hljs-function">(<span class="hljs-params"> html </span>) =&gt;</span> &#123;</span><br><span class="line">	<span class="hljs-keyword">const</span> parser = <span class="hljs-keyword">new</span> DOMParser();</span><br><span class="line">	<span class="hljs-keyword">const</span> <span class="hljs-built_in">document</span> = parser.parseFromString( html, <span class="hljs-string">'text/html'</span> );</span><br><span class="line">	<span class="hljs-keyword">const</span> head = <span class="hljs-built_in">document</span>.head;</span><br><span class="line">	<span class="hljs-keyword">const</span> template = head.querySelector( <span class="hljs-string">'template'</span> );</span><br><span class="line">	<span class="hljs-keyword">const</span> style = head.querySelector( <span class="hljs-string">'style'</span> );</span><br><span class="line">	<span class="hljs-keyword">const</span> script = head.querySelector( <span class="hljs-string">'script'</span> );</span><br><span class="line"></span><br><span class="line">	<span class="hljs-keyword">return</span> &#123;</span><br><span class="line">		template,</span><br><span class="line">		style,</span><br><span class="line">		script</span><br><span class="line">	&#125;;</span><br><span class="line">&#125; );</span><br></pre></td></tr></table></figure>
<p>æŠŠæ‰€æœ‰çš„è·å–å’Œè§£æä»£ç ç§»åˆ°ç¬¬ä¸€ä¸ªè¾…åŠ©å‡½æ•° <code>fetchAndParse()</code> ä¸­ï¼š</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-built_in">window</span>.loadComponent = ( <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fetchAndParse</span>(<span class="hljs-params"> URL </span>) </span>&#123;</span><br><span class="line">		<span class="hljs-keyword">return</span> fetch( URL ).then( <span class="hljs-function">(<span class="hljs-params"> response </span>) =&gt;</span> &#123;</span><br><span class="line">			<span class="hljs-keyword">return</span> response.text();</span><br><span class="line">		&#125; ).then( <span class="hljs-function">(<span class="hljs-params"> html </span>) =&gt;</span> &#123;</span><br><span class="line">			<span class="hljs-keyword">const</span> parser = <span class="hljs-keyword">new</span> DOMParser();</span><br><span class="line">			<span class="hljs-keyword">const</span> <span class="hljs-built_in">document</span> = parser.parseFromString( html, <span class="hljs-string">'text/html'</span> );</span><br><span class="line">			<span class="hljs-keyword">const</span> head = <span class="hljs-built_in">document</span>.head;</span><br><span class="line">			<span class="hljs-keyword">const</span> template = head.querySelector( <span class="hljs-string">'template'</span> );</span><br><span class="line">			<span class="hljs-keyword">const</span> style = head.querySelector( <span class="hljs-string">'style'</span> );</span><br><span class="line">			<span class="hljs-keyword">const</span> script = head.querySelector( <span class="hljs-string">'script'</span> );</span><br><span class="line"></span><br><span class="line">			<span class="hljs-keyword">return</span> &#123;</span><br><span class="line">				template,</span><br><span class="line">				style,</span><br><span class="line">				script</span><br><span class="line">			&#125;;</span><br><span class="line">		&#125; );</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">loadComponent</span>(<span class="hljs-params"> URL </span>) </span>&#123;</span><br><span class="line">		<span class="hljs-keyword">return</span> fetchAndParse( URL );</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="hljs-keyword">return</span> loadComponent;</span><br><span class="line">&#125;() );</span><br></pre></td></tr></table></figure>
<p>Fetch API å¹¶ä¸æ˜¯ä»å¤–éƒ¨æ–‡ä»¶ä¸­è·å– DOM æ ‘çš„å”¯ä¸€æ–¹æ³•ã€‚<code>XMLHttpRequest</code> <a href="https://jsfiddle.net/Comandeer/rokoxp7d/" target="_blank" rel="noopener">æœ‰ä¸€ä¸ªä¸“é—¨çš„æ–‡ä»¶æ¨¡å¼</a> è®©ä½ å¯ä»¥çœæ‰æ•´ä¸ªçš„è§£ææ­¥éª¤ã€‚ä½†æ˜¯å®ƒæœ‰ä¸€ä¸ªç¼ºç‚¹ï¼š<code>XMLHttpRequest</code> æ²¡æœ‰ <code>Promise</code> å‹çš„ APIï¼Œè¿™éœ€è¦ä½ è‡ªè¡Œå®ç°ã€‚</p>
<h2 id="æ³¨å†Œç»„ä»¶"><a href="#æ³¨å†Œç»„ä»¶" class="headerlink" title="æ³¨å†Œç»„ä»¶"></a>æ³¨å†Œç»„ä»¶</h2><p>æ—¢ç„¶å·²ç»æ‹¿åˆ°æ‰€æœ‰éœ€è¦çš„éƒ¨ä»¶äº†ï¼Œç°åœ¨æ¥ç¼–å†™ç”¨äºæ³¨å†Œè‡ªå®šä¹‰ç»„ä»¶çš„ <code>registerComponent()</code> å‡½æ•°ï¼š</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-built_in">window</span>.loadComponent = ( <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fetchAndParse</span>(<span class="hljs-params"> URL </span>) </span>&#123;</span><br><span class="line">		[â€¦]</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">registerComponent</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">loadComponent</span>(<span class="hljs-params"> URL </span>) </span>&#123;</span><br><span class="line">		<span class="hljs-keyword">return</span> fetchAndParse( URL ).then( registerComponent );</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="hljs-keyword">return</span> loadComponent;</span><br><span class="line">&#125;() );</span><br></pre></td></tr></table></figure>
<p>æé†’ä¸€ä¸‹ï¼šè‡ªå®šä¹‰å…ƒç´ å¿…é¡»æ˜¯ç»§æ‰¿è‡ª <code>HTMLElement</code> çš„ç±»ã€‚å¦å¤–æ‰€æœ‰çš„ç»„ä»¶éƒ½ä¼šç”¨ Shadow DOM æ¥æ‰¿è½½æ ·å¼å’Œæ¨¡ç‰ˆå†…å®¹ã€‚è¿™ä¹Ÿå°±æ˜¯è¯´æ‰€æœ‰çš„ç»„ä»¶å°†ä½¿ç”¨ç›¸åŒçš„ classã€‚åˆ›å»ºï¼š</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">registerComponent</span>(<span class="hljs-params"> &#123; template, style, script &#125; </span>) </span>&#123;</span><br><span class="line">	<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UnityComponent</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HTMLElement</span> </span>&#123;</span><br><span class="line">		connectedCallback() &#123;</span><br><span class="line">			<span class="hljs-keyword">this</span>._upcast();</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		_upcast() &#123;</span><br><span class="line">			<span class="hljs-keyword">const</span> shadow = <span class="hljs-keyword">this</span>.attachShadow( &#123; <span class="hljs-attr">mode</span>: <span class="hljs-string">'open'</span> &#125; );</span><br><span class="line"></span><br><span class="line">			shadow.appendChild( style.cloneNode( <span class="hljs-literal">true</span> ) );</span><br><span class="line">			shadow.appendChild( <span class="hljs-built_in">document</span>.importNode( template.content, <span class="hljs-literal">true</span> ) );</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä½ å¯ä»¥æŠŠå®ƒå®šä¹‰åœ¨ <code>registerComponent()</code> å†…éƒ¨ï¼Œå› ä¸ºè¿™ä¸ª class ä¼šç”¨åˆ°ä¼ ç»™è¿™ä¸ªå‡½æ•°çš„ä¸€äº›æ•°æ®ã€‚è¿™ä¸ª class ä¼šç”¨ä¸€ä¸ªè·Ÿ<a href="https://blog.comandeer.pl/javascript/2017/10/31/deklaratywny-shadow-dom.html" target="_blank" rel="noopener">è¿™ç¯‡å…³äºå£°æ˜å¼ DOM çš„æ–‡ç« ï¼ˆæ³¢å…°è¯­ï¼‰</a> æ‰€ä»‹ç»çš„ç¨å¾®æœ‰æ‰€ä¸åŒçš„æœºåˆ¶æ¥é™„åŠ  Shadow DOMã€‚</p>
<p>ä¸æ³¨å†Œç»„ä»¶ç›¸å…³çš„åªå‰©ä¸‹ä¸€ä»¶äº‹--ç»™ä»–å‘½åå¹¶æ·»åŠ åˆ°é¡µé¢ä¸Šçš„ç»„ä»¶ä¸­ã€‚</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">registerComponent</span>(<span class="hljs-params"> &#123; template, style, script &#125; </span>) </span>&#123;</span><br><span class="line">	<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UnityComponent</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HTMLElement</span> </span>&#123;</span><br><span class="line">		[â€¦]</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="hljs-keyword">return</span> customElements.define( <span class="hljs-string">'hello-world'</span>, UnityComponent );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç°åœ¨æµ‹è¯•è¿™ä¸ªç»„ä»¶ï¼Œå®ƒçœ‹èµ·æ¥æ˜¯è¿™ä¸ªæ ·å­çš„ï¼š</p>
<p><img src="/pictures/3-single-file-components/component.png" alt="component"></p>
<p><em>Chrome ä¸­æ˜¾ç¤ºçš„ç»„ä»¶ï¼šçº¢è‰²åœ†è§’æ–¹å—ï¼Œå†…éƒ¨æœ‰ â€œHello, world! My name is Comandeerâ€å­—æ ·</em></p>
<h2 id="è·å–è„šæœ¬å†…å®¹"><a href="#è·å–è„šæœ¬å†…å®¹" class="headerlink" title="è·å–è„šæœ¬å†…å®¹"></a>è·å–è„šæœ¬å†…å®¹</h2><p>ç®€å•çš„éƒ¨åˆ†å·²ç»åšå®Œäº†ã€‚ç°åœ¨è¯¥åšç‚¹é«˜éš¾åº¦çš„ï¼šæ·»åŠ è¡Œä¸ºå±‚å¹¶ä¸”â€¦â€¦å°†ç»„ä»¶åç§°åŠ¨æ€åŒ–ã€‚ä¸Šä¸€æ­¥é‡Œä½ æŠŠç»„ä»¶åç§°ç¡¬ç¼–ç åœ¨ä»£ç é‡Œäº†ï¼Œä¸è¿‡ï¼Œå®ƒåº”è¯¥æ˜¯ä»ç»„ä»¶ä¸Šè·å–ã€‚åŒæ ·çš„åšæ³•ä¹Ÿä¼šè¢«ç”¨åœ¨ä¸ºè‡ªå®šä¹‰ç»„ä»¶ç»‘å®šäº‹ä»¶ç›‘å¬å™¨ä¸Šã€‚ä½¿ç”¨åŸºäº Vue çš„çº¦å®šï¼š</p>
<figure class="highlight html hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span></span><br><span class="line">	[â€¦]</span><br><span class="line"><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="hljs-undefined"></span></span><br><span class="line"><span class="hljs-css">	<span class="hljs-selector-attr">[â€¦]</span></span></span><br><span class="line"><span class="hljs-undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="hljs-undefined"></span></span><br><span class="line"><span class="hljs-javascript">	<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123; <span class="hljs-comment">// 1</span></span></span><br><span class="line"><span class="hljs-javascript">		name: <span class="hljs-string">'hello-world'</span>, <span class="hljs-comment">// 2</span></span></span><br><span class="line"><span class="hljs-javascript">		onClick() &#123; <span class="hljs-comment">// 3</span></span></span><br><span class="line"><span class="hljs-javascript">			alert( <span class="hljs-string">`Don't touch me!`</span> );</span></span><br><span class="line"><span class="hljs-undefined">		&#125;</span></span><br><span class="line"><span class="hljs-undefined">	&#125;</span></span><br><span class="line"><span class="hljs-undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å‡å®šç»„ä»¶ä¸­çš„ <code>&lt;script&gt;</code> æ˜¯ä¸€ä¸ªæ¨¡å—ï¼Œå®ƒå¯ä»¥å¯¼å‡ºå†…å®¹(1)ï¼Œå¯¼å‡ºçš„æ˜¯ä¸€ä¸ªåŒ…å«ç»„ä»¶åç§°(2)å’Œä»¥ <code>on...</code> å¼€å¤´çš„äº‹ä»¶ç›‘å¬å™¨æ–¹æ³•(3)çš„å¯¹è±¡ã€‚</p>
<p>çœ‹èµ·æ¥ä¸é”™ï¼Œä¹Ÿæ²¡æœ‰ä»»ä½•æ³„æ¼ï¼ˆå› ä¸ºåœ¨å…¨å±€ä½œç”¨åŸŸä¸­ä¸å­˜åœ¨æ¨¡å—ï¼‰ã€‚ç„¶è€Œè¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼šå¦‚ä½•å¤„ç†å†…éƒ¨æ¨¡å—çš„å¯¼å‡ºå¹¶æ²¡æœ‰ä¸€ä¸ªæ ‡å‡†ï¼ˆé‚£äº›ç›´æ¥å†™åœ¨ HTML æ–‡æ¡£ä¸­çš„ä»£ç ä¹Ÿæ˜¯ï¼‰ã€‚å¯¼å…¥å£°æ˜ä¼šå‡è®¾å®ƒå¾—åˆ°çš„æ˜¯ä¸€ä¸ªæ¨¡å—æ ‡è¯†ç¬¦ã€‚å¤šæ•°æƒ…å†µä¸‹æ˜¯ä¸€ä¸ªä»£ç æ–‡ä»¶çš„ URLã€‚å†…éƒ¨æ¨¡æ²¡æœ‰è¿™ç§æ ‡è¯†ç¬¦ã€‚</p>
<p>åˆ«ç€æ€¥æ”¾å¼ƒï¼Œä½ å¯ä»¥ç”¨ä¸€ä¸ªè¶…çº§è„çš„ hackã€‚è‡³å°‘æœ‰ä¸¤ç§æ–¹æ³•èƒ½å¼ºåˆ¶æµè§ˆå™¨å°†æ–‡æœ¬å½“ä½œæ–‡ä»¶æ¥å¤„ç†ï¼š<a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/Data_URIs" target="_blank" rel="noopener">Data URI</a> å’Œ <a href="https://developer.mozilla.org/en-US/docs/Web/API/URL/createObjectURL" target="_blank" rel="noopener">Object URI</a>ã€‚</p>
<p><a href="https://stackoverflow.com/a/46086545" target="_blank" rel="noopener">Stack Overflow å»ºè®®ä½¿ç”¨ Service Worker</a>ã€‚ä¸è¿‡åœ¨æˆ‘ä»¬è¿™ä¸ªæ¡ˆä¾‹ä¸­æœ‰ç‚¹å¤§æå°ç”¨äº†ã€‚</p>
<h2 id="Data-URI-å’Œ-Object-URI"><a href="#Data-URI-å’Œ-Object-URI" class="headerlink" title="Data URI å’Œ Object URI"></a>Data URI å’Œ Object URI</h2><p>Data URI æ˜¯ä¸€ä¸ªå¤è€è€ŒåŸå§‹çš„æ–¹æ¡ˆã€‚å®ƒæ˜¯å»ç”¨é™¤æ–‡ä»¶å†…å®¹ä¸­æ— ç”¨çš„ç©ºæ ¼å¹¶ä¸”å¦‚æœæŒ‡å®šä¼šæŠŠæ‰€æœ‰å†…å®¹è½¬æˆ Base64 ç¼–ç çš„æ–¹å¼å°†æ–‡ä»¶è½¬æˆ URLã€‚å‡è®¾ä½ æœ‰ä¸€ä¸ªéå¸¸ç®€å•çš„ JavaScript æ–‡ä»¶ï¼š</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-literal">true</span>;</span><br></pre></td></tr></table></figure>
<p>å®ƒçš„ Data URI å½¢å¼æ˜¯è¿™æ ·çš„ï¼š</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">data:application/javascript;base64,ZXhwb3J0IGRlZmF1bHQgdHJ1ZTs=</span><br></pre></td></tr></table></figure>
<p>ä½ å¯ä»¥åƒå¼•ç”¨ä¸€ä¸ªæ–‡ä»¶ä¸€æ ·å¼•ç”¨è¿™ä¸ª URLï¼š</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">import</span> test <span class="hljs-keyword">from</span> <span class="hljs-string">'data:application/javascript;base64,ZXhwb3J0IGRlZmF1bHQgdHJ1ZTs='</span>;</span><br><span class="line"></span><br><span class="line"><span class="hljs-built_in">console</span>.log( test );</span><br></pre></td></tr></table></figure>
<p>ç„¶è€Œæˆ‘ä»¬ä¸€çœ¼å°±èƒ½çœ‹å‡º Data URI æ–¹å¼çš„ç¼ºé™·ï¼šJavaScript æ–‡ä»¶è¶Šæ¥è¶Šå¤§ï¼ŒURL ä¹Ÿå°±å˜å¾—è¶Šæ¥è¶Šé•¿ã€‚ä»¥<em>ç®€æ˜çš„</em>æ–¹å¼å°†äºŒè¿›åˆ¶æ•°æ®è½¬æˆ Data URI ä¹Ÿå¾ˆå›°éš¾ã€‚å› æ­¤äººä»¬åˆ›é€ äº† Object URIã€‚å®ƒæ˜¯å‡ ä¸ªæ ‡å‡†çš„äº§ç‰©ï¼ŒåŒ…æ‹¬ <a href="https://developer.mozilla.org/en-US/docs/Web/API/File/Using_files_from_web_applications" target="_blank" rel="noopener">File API</a> å’ŒåŒ…æ‹¬ <code>&lt;video&gt;</code> å’Œ <code>&lt;audio&gt;</code> çš„ <a href="">HTML 5.x</a>ã€‚Object URI çš„ç›®æ ‡å¾ˆç®€å•ï¼šä»äºŒè¿›åˆ¶æ•°æ®ç”Ÿæˆè™šæ‹Ÿæ–‡ä»¶ï¼Œè¿”å›ä¸€ä¸ªåªåœ¨å½“å‰é¡µé¢æœ‰æ•ˆçš„å”¯ä¸€ URLã€‚ç®€å•çš„è¯´ï¼šåœ¨å†…å­˜ä¸­åˆ›å»ºä¸€ä¸ªå…·æœ‰å”¯ä¸€åç§°çš„æ–‡ä»¶ã€‚è¿™æ ·ä½ å°±åˆ©ç”¨äº† Data URI çš„æ‰€æœ‰ä¼˜åŠ¿ï¼ˆç”¨ç®€å•çš„æ–¹å¼åˆ›å»ºæ–°â€œæ–‡ä»¶â€ï¼‰åˆé¿å…äº†å®ƒçš„ç¼ºé™·ï¼ˆä½ ä¸ç”¨åœ¨ä»£ç ä¸­åŒ…å«å¯èƒ½å¤šè¾¾ 100MB çš„æ–‡å­—äº†ï¼‰ã€‚</p>
<p>æµåª’ä½“ï¼ˆä¾‹å¦‚ï¼š<code>&lt;video&gt;</code> å’Œ <code>&lt;audio&gt;</code>ï¼‰æˆ–è€…ä½¿ç”¨æ‹–æ‹½æ–¹å¼é€šè¿‡ <code>input[type=file]</code> ä¸Šä¼ æ–‡ä»¶ç»å¸¸ä¼šåˆ›å»º Object URIã€‚ä¸è¿‡ä½ ä¹Ÿå¯ä»¥ç”¨ <a href="https://developer.mozilla.org/en-US/docs/Web/API/File" target="_blank" rel="noopener"><code>File</code></a> å’Œ <a href="https://developer.mozilla.org/en-US/docs/Web/API/Blob" target="_blank" rel="noopener"><code>Blob</code></a> ç±»æ‰‹åŠ¨åˆ›å»ºç±»ä¼¼çš„æ–‡ä»¶ã€‚åœ¨è¿™ä¸ªæ¡ˆä¾‹ä¸­æˆ‘ä»¬è¦æŠŠæ¨¡å—çš„å†…å®¹å‚¨å­˜åœ¨ <code>Blog</code> ç±»ä¸­å¹¶æŠŠå®ƒè½¬æ¢æˆ Object URIï¼š</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">const</span> myJSFile = <span class="hljs-keyword">new</span> Blob( [ <span class="hljs-string">'export default true;'</span> ], &#123; <span class="hljs-attr">type</span>: <span class="hljs-string">'application/javascript'</span> &#125; );</span><br><span class="line"><span class="hljs-keyword">const</span> myJSURL = URL.createObjectURL( myJSFile );</span><br><span class="line"></span><br><span class="line"><span class="hljs-built_in">console</span>.log( myJSURL ); <span class="hljs-comment">// blob:https://blog.comandeer.pl/8e8fbd73-5505-470d-a797-dfb06ca71333</span></span><br></pre></td></tr></table></figure>
<h2 id="åŠ¨æ€å¯¼å…¥"><a href="#åŠ¨æ€å¯¼å…¥" class="headerlink" title="åŠ¨æ€å¯¼å…¥"></a>åŠ¨æ€å¯¼å…¥</h2><p>ä¸è¿‡è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼šimport å£°æ˜æ— æ³•æ¥æ”¶ä¸€ä¸ªä½œä¸ºæ¨¡å—æ ‡è¯†ç¬¦çš„å˜é‡ã€‚è¿™æ„å‘³ç€ä½ èƒ½æŠŠè¿™ä¸ªæ¨¡å—è½¬æ¢æˆâ€œæ–‡ä»¶â€å´æ— æ³•å¯¼å…¥ã€‚åˆ°å¤´æ¥è¿˜æ˜¯è¡Œä¸é€šï¼Ÿ</p>
<p>ä¸æ˜¯çš„ã€‚å¾ˆæ—©ä»¥å‰äººä»¬å°±æ³¨æ„åˆ°äº†è¿™ä¸ªé—®é¢˜å¹¶æå‡ºäº†<a href="https://developers.google.com/web/updates/2017/11/dynamic-import" target="_blank" rel="noopener">åŠ¨æ€å¯¼å…¥ææ¡ˆ</a>ã€‚å†™è¿™ç¯‡æ–‡ç« çš„æ—¶å€™ï¼ˆ2018 å¹´ 8 æœˆï¼‰å·²ç»è¿›è¡Œåˆ°æ ‡å‡†åŒ–çš„ç¬¬ä¸‰é˜¶æ®µäº†ï¼Œåœ¨æµè§ˆå™¨å’Œå…¶ä»– JavaScript ç¯å¢ƒä¸­å·²ç»å¼€å§‹éƒ¨ç½²ã€‚ä½¿ç”¨å˜é‡ä½œä¸ºæ¨¡å—æ ‡è¯†ç¬¦ä»¥åŠåŠ¨æ€å¯¼å…¥å·²ç»æ²¡é—®é¢˜äº†ï¼š</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">const</span> myJSFile = <span class="hljs-keyword">new</span> Blob( [ <span class="hljs-string">'export default true;'</span> ], &#123; <span class="hljs-attr">type</span>: <span class="hljs-string">'application/javascript'</span> &#125; );</span><br><span class="line"><span class="hljs-keyword">const</span> myJSURL = URL.createObjectURL( myJSFile );</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">import</span>( myJSURL ).then( <span class="hljs-function">(<span class="hljs-params"> <span class="hljs-built_in">module</span> </span>) =&gt;</span> &#123;</span><br><span class="line">	<span class="hljs-built_in">console</span>.log( <span class="hljs-built_in">module</span>.default ); <span class="hljs-comment">// true</span></span><br><span class="line">&#125; );</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°ï¼Œ<code>import()</code> çš„ç”¨æ³•è·Ÿå‡½æ•°ä¸€æ ·å¹¶è¿”å›ä¸€ä¸ª <code>Promise</code>ï¼Œå®ƒæ˜¯ä¸€ä¸ªä»£è¡¨æ¨¡å—çš„å¯¹è±¡ã€‚åŒ…å«äº†æ‰€æœ‰å£°æ˜è¿‡çš„å¯¼å‡ºé¡¹ç›®ï¼Œé»˜è®¤çš„å¯¼å‡ºé¡¹ä»¥ <code>default</code> å±æ€§æ ‡è¯†ã€‚</p>
<h2 id="éƒ¨ç½²"><a href="#éƒ¨ç½²" class="headerlink" title="éƒ¨ç½²"></a>éƒ¨ç½²</h2><p>æ—¢ç„¶ä½ å·²ç»çŸ¥é“ä½ è¦åšä»€ä¹ˆï¼Œé‚£ä¹ˆå°±åŠ¨æ‰‹å§ã€‚æ·»åŠ ä¸‹ä¸€ä¸ªè¾…åŠ©å‡½æ•° <code>getSettings()</code>ã€‚å®ƒä¼šåœ¨ <code>registerComponents()</code> ä¹‹å‰è¢«è°ƒç”¨æ¥ä»è„šæœ¬ä¸­è·å–å¿…é¡»çš„ä¿¡æ¯ï¼š</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getSettings</span>(<span class="hljs-params"> &#123; template, style, script &#125; </span>) </span>&#123;</span><br><span class="line">	<span class="hljs-keyword">return</span> &#123;</span><br><span class="line">		template,</span><br><span class="line">		style,</span><br><span class="line">		script</span><br><span class="line">	&#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">[â€¦]</span><br><span class="line"></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">loadComponent</span>(<span class="hljs-params"> URL </span>) </span>&#123;</span><br><span class="line">	<span class="hljs-keyword">return</span> fetchAndParse( URL ).then( getSettings ).then( registerComponent );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç›®å‰è¿™ä¸ªå‡½æ•°åªæ˜¯è¿”å›äº†æ‰€æœ‰ä¼ ç»™å®ƒçš„å‚æ•°ã€‚æˆ‘ä»¬è¦æŠŠä¸Šé¢æåˆ°çš„æ•´ä¸ªçš„é€»è¾‘æ·»åŠ è¿›å»ã€‚é¦–å…ˆï¼ŒæŠŠè„šæœ¬è½¬æˆ Object URIï¼š</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">const</span> jsFile = <span class="hljs-keyword">new</span> Blob( [ script.textContent ], &#123; <span class="hljs-attr">type</span>: <span class="hljs-string">'application/javascript'</span> &#125; );</span><br><span class="line"><span class="hljs-keyword">const</span> jsURL = URL.createObjectURL( jsFile );</span><br></pre></td></tr></table></figure>
<p>ç„¶åï¼Œé€šè¿‡ import åŠ è½½å®ƒå¹¶è¿”å› templateï¼Œstyles å’Œä» <code>&lt;script&gt;</code> ä¸­æå–çš„ç»„ä»¶åç§°ã€‚</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">return</span> <span class="hljs-keyword">import</span>( jsURL ).then( <span class="hljs-function">(<span class="hljs-params"> <span class="hljs-built_in">module</span> </span>) =&gt;</span> &#123;</span><br><span class="line">	<span class="hljs-keyword">return</span> &#123;</span><br><span class="line">		name: <span class="hljs-built_in">module</span>.default.name,</span><br><span class="line">		template,</span><br><span class="line">		style</span><br><span class="line">	&#125;</span><br><span class="line">&#125; );</span><br></pre></td></tr></table></figure>
<p>å€ŸåŠ©äºæ­¤ï¼Œ<code>registerComponent()</code> æ¥æ”¶çš„ 3 ä¸ªå‚æ•°é‡Œ <code>&lt;script&gt;</code> å˜æˆäº†ç»„ä»¶çš„åç§°ã€‚ä¿®æ”¹ä»£ç ï¼š</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">registerComponent</span>(<span class="hljs-params"> &#123; template, style, name &#125; </span>) </span>&#123;</span><br><span class="line">	<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UnityComponent</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HTMLElement</span> </span>&#123;</span><br><span class="line">		[â€¦]</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="hljs-keyword">return</span> customElements.define( name, UnityComponent );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><em>ï¼¼( ï½€âˆ€Â´)ï¼ VoilÃ !</em></p>
<h2 id="è¡Œä¸ºå±‚"><a href="#è¡Œä¸ºå±‚" class="headerlink" title="è¡Œä¸ºå±‚"></a>è¡Œä¸ºå±‚</h2><p>ç»„ä»¶è¿˜æœ‰ä¸€éƒ¨åˆ†æ²¡å®Œæˆï¼šè¡Œä¸ºï¼Œå³å¤„ç†äº‹ä»¶ã€‚ç›®å‰ä½ åªèƒ½ä» <code>getSettings()</code> å‡½æ•°è·å–ç»„ä»¶çš„åå­—ï¼Œä½ è¿˜éœ€è¦è·å–äº‹ä»¶ç›‘å¬å™¨ã€‚<code>Object.entries()</code> å¯ä»¥ç”¨æ¥å®ç°è¿™ä¸ªç›®çš„ã€‚æˆ‘ä»¬å›åˆ° <code>getSettings()</code> ç»™å®ƒæ·»åŠ é€‚å½“ä»£ç ï¼š</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getSettings</span>(<span class="hljs-params"> &#123; template, style, script &#125; </span>) </span>&#123;</span><br><span class="line">	[â€¦]</span><br><span class="line"></span><br><span class="line">	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getListeners</span>(<span class="hljs-params"> settings </span>) </span>&#123; <span class="hljs-comment">// 1</span></span><br><span class="line">		<span class="hljs-keyword">const</span> listeners = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">		<span class="hljs-built_in">Object</span>.entries( settings ).forEach( <span class="hljs-function">(<span class="hljs-params"> [ setting, value ] </span>) =&gt;</span> &#123; <span class="hljs-comment">// 3</span></span><br><span class="line">			<span class="hljs-keyword">if</span> ( setting.startsWith( <span class="hljs-string">'on'</span> ) ) &#123; <span class="hljs-comment">// 4</span></span><br><span class="line">				listeners[ setting[ <span class="hljs-number">2</span> ].toLowerCase() + setting.substr( <span class="hljs-number">3</span> ) ] = value; <span class="hljs-comment">// 5</span></span><br><span class="line">			&#125;</span><br><span class="line">		&#125; );</span><br><span class="line"></span><br><span class="line">		<span class="hljs-keyword">return</span> listeners;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="hljs-keyword">return</span> <span class="hljs-keyword">import</span>( jsURL ).then( <span class="hljs-function">(<span class="hljs-params"> <span class="hljs-built_in">module</span> </span>) =&gt;</span> &#123;</span><br><span class="line">		<span class="hljs-keyword">const</span> listeners = getListeners( <span class="hljs-built_in">module</span>.default ); <span class="hljs-comment">// 2</span></span><br><span class="line"></span><br><span class="line">		<span class="hljs-keyword">return</span> &#123;</span><br><span class="line">			name: <span class="hljs-built_in">module</span>.default.name,</span><br><span class="line">			listeners, <span class="hljs-comment">// 6</span></span><br><span class="line">			template,</span><br><span class="line">			style</span><br><span class="line">		&#125;</span><br><span class="line">	&#125; );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å‡½æ•°å˜å¾—å¤æ‚äº†ã€‚å‡ºç°äº†æ–°çš„è¾…åŠ©å‡½æ•° <code>getListeners()</code> (1)ã€‚æ¨¡å—çš„ export è¢«ä¼ é€’ç»™å®ƒ(2)ã€‚ç„¶åä½¿ç”¨ <code>Object.entries()</code> éå†äº†è¿™ä¸ª export çš„æ‰€æœ‰å±æ€§(3)ã€‚å¦‚æœå½“å‰å±æ€§åä»¥ <code>on...</code> å¼€å¤´(4)ï¼Œå°±æŠŠè¿™ä¸ªå±æ€§çš„å€¼èµ‹ç»™ <code>listeners</code> å¯¹è±¡ï¼Œå¹¶æŠŠ <code>setting[2].toLowerCase() + setting.substr(3)</code> ä½œä¸ºå®ƒçš„å±æ€§å(5)ã€‚è¿™ä¸ªå±æ€§åæ˜¯é€šè¿‡å»æ‰ <code>on</code> å‰ç¼€åæŠŠé¦–å­—æ¯è½¬æ¢æˆå°å†™ï¼ˆè¿™æ · <code>onClick</code> ä¼šè¢«è½¬æ¢æˆ <code>click</code>ï¼‰å¾—åˆ°çš„ã€‚ç„¶åæŠŠ <code>listeners</code> å¯¹è±¡ä¼ å‡ºå»(6)ã€‚</p>
<p>å¯ä»¥ç”¨ <code>[].reduce()</code> ä»£æ›¿ <code>[].forEach()</code> æ¥å¤„ç† <code>listeners</code> å˜é‡ï¼š</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getListeners</span>(<span class="hljs-params"> settings </span>) </span>&#123;</span><br><span class="line">	<span class="hljs-keyword">return</span> <span class="hljs-built_in">Object</span>.entries( settings ).reduce( <span class="hljs-function">(<span class="hljs-params"> listeners, [ setting, value ] </span>) =&gt;</span> &#123;</span><br><span class="line">		<span class="hljs-keyword">if</span> ( setting.startsWith( <span class="hljs-string">'on'</span> ) ) &#123;</span><br><span class="line">			listeners[ setting[ <span class="hljs-number">2</span> ].toLowerCase() + setting.substr( <span class="hljs-number">3</span> ) ] = value;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="hljs-keyword">return</span> listeners;</span><br><span class="line">	&#125;, &#123;&#125; );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç°åœ¨ä½ å¯ä»¥åœ¨ç»„ä»¶çš„ class ä¸­ç»‘å®šè¿™äº›ç›‘å¬å™¨äº†ï¼š</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">registerComponent</span>(<span class="hljs-params"> &#123; template, style, name, listeners &#125; </span>) </span>&#123; <span class="hljs-comment">// 1</span></span><br><span class="line">	<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UnityComponent</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HTMLElement</span> </span>&#123;</span><br><span class="line">		connectedCallback() &#123;</span><br><span class="line">			<span class="hljs-keyword">this</span>._upcast();</span><br><span class="line">			<span class="hljs-keyword">this</span>._attachListeners(); <span class="hljs-comment">// 2</span></span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		[â€¦]</span><br><span class="line"></span><br><span class="line">		_attachListeners() &#123;</span><br><span class="line">			<span class="hljs-built_in">Object</span>.entries( listeners ).forEach( <span class="hljs-function">(<span class="hljs-params"> [ event, listener ] </span>) =&gt;</span> &#123; <span class="hljs-comment">// 3</span></span><br><span class="line">				<span class="hljs-keyword">this</span>.addEventListener( event, listener, <span class="hljs-literal">false</span> ); <span class="hljs-comment">// 4</span></span><br><span class="line">			&#125; );</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="hljs-keyword">return</span> customElements.define( name, UnityComponent );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é‡æ„è¿‡ç¨‹ä¸­æˆ‘ä»¬å¢åŠ äº†ä¸€ä¸ªæ–°çš„å‚æ•° <code>listeners</code> (1)ï¼Œä»¥åŠ class ä¸­çš„ä¸€ä¸ªæ–°çš„æ–¹æ³• <code>_attachListeners</code> (2)ã€‚æˆ‘ä»¬åˆä¸€æ¬¡ç”¨åˆ°äº† <code>Object.entries()</code>--è¿™æ¬¡æ˜¯ç”¨æ¥éå† <code>listeners</code> (3) å¹¶æŠŠå®ƒä»¬ç»‘å®šåˆ°è¿™ä¸ªç»„ä»¶å…ƒç´ ä¸Š (4)ã€‚</p>
<p>åšå®Œè¿™äº›ä»¥åæˆ‘ä»¬çš„ç»„ä»¶åº”è¯¥ä¼šå“åº”ç‚¹å‡»äº‹ä»¶äº†ï¼š</p>
<p><img src="/pictures/3-single-file-components/alert.png" alt="alert"></p>
<p><em>ç‚¹å‡»äº†è¿™ä¸ªç»„ä»¶ä»¥å Chrome å¼¹æ¡†æ˜¾ç¤ºï¼šâ€œDonâ€™t touch me!â€</em></p>
<p>ä»¥ä¸Šå°±æ˜¯å¦‚ä½•å®ç°ä¸€ä¸ªå•æ–‡ä»¶ Web Components ğŸ‰!</p>
<h2 id="æµè§ˆå™¨å…¼å®¹æ€§ä»¥åŠå…¶ä»–"><a href="#æµè§ˆå™¨å…¼å®¹æ€§ä»¥åŠå…¶ä»–" class="headerlink" title="æµè§ˆå™¨å…¼å®¹æ€§ä»¥åŠå…¶ä»–"></a>æµè§ˆå™¨å…¼å®¹æ€§ä»¥åŠå…¶ä»–</h2><p>ä½ å¯ä»¥çœ‹å‡ºï¼Œå³ä½¿æ˜¯ä¸ºäº†æ”¯æŒä¸€ä¸ªæœ€ç®€å•å½¢å¼çš„å•æ–‡ä»¶ç»„ä»¶ï¼Œä¹Ÿéœ€è¦åšéå¸¸å¤šçš„å·¥ä½œã€‚æˆ‘ä»¬æ‰€å±•ç°çš„è¿™ä¸ªç³»ç»Ÿä¸­çš„è®¸å¤šéƒ¨åˆ†éƒ½æ˜¯ç”¨è„ hack å®ç°çš„ï¼ˆç”¨ Object URI æ¥åŠ è½½ ES æ¨¡å—ï¼Ÿ--ä»€ä¹ˆé¬¼ï¼ï¼‰è€Œä¸”å¦‚æœæ²¡æœ‰æµè§ˆå™¨çš„åŸç”Ÿæ”¯æŒï¼Œè¿™é¡¹æŠ€æœ¯ä¹Ÿæ²¡ä»€ä¹ˆæ„ä¹‰ã€‚æ›´é‡è¦çš„æ˜¯ï¼Œåœ¨æˆ‘å†™è¿™ç¯‡æ–‡ç« çš„æ—¶å€™ï¼ˆ2018 å¹´ 8 æœˆï¼‰Firefox å¹¶ä¸æ”¯æŒ Custom Elements å’Œ dynamic importã€‚å¦ç™½è¯´è¿™ä¸œè¥¿ç°åœ¨åªåœ¨ Chrome é‡Œå¥½ä½¿ã€‚å› æ­¤--ç›®å‰æ¥è¯´--å®ƒåªæ˜¯ä¸ºäº†æ»¡è¶³ä¸€ä¸‹å¥½å¥‡å¿ƒï¼Œæ²¡ä»€ä¹ˆå®é™…ç”¨å¤„ã€‚</p>
<p>ä¸è¿‡å®ç°ä¸€ä¸ªè¿™æ ·çš„ä¸œè¥¿è¿˜æ˜¯å¾ˆå¥½ç©çš„ã€‚å®ƒæ˜¯ä¸€ä¸ªæ¶‰åŠäº†è®¸å¤šæµè§ˆå™¨å¼€å‘å’Œç°ä»£ web æ ‡å‡†ç›¸å…³å†…å®¹çš„<em>ä¸ä¼—ä¸åŒ</em>çš„å°ç©æ„å„¿ã€‚æˆ‘å¸Œæœ›è‡³å°‘èƒ½æœ‰ä¸€ä¸ªäººçœ‹å®Œäº†è¿™ç¯‡æ–‡ç« ï¼</p>
<p>å½“ç„¶äº†<a href="https://blog.comandeer.pl/assets/jednoplikowe-komponenty/" target="_blank" rel="noopener">æ•´ä¸ªä½œå“å¯ä»¥åœ¨ç½‘ä¸Šé¢„è§ˆ</a>ã€‚</p>

    
    </div>
    
    
</article>




    
        <article class="article content gallery" itemscope="" itemprop="blogPost">
    <h1 class="article-title is-size-3 is-size-4-mobile" itemprop="name">
        
            <a href="/2019/03/26/css-hardware-accelerate/" itemprop="url">ã€Œè¯‘ã€ä½¿ç”¨ CSS ç¡¬ä»¶åŠ é€Ÿæå‡ç½‘ç«™æ€§èƒ½</a>
        
    </h1>
    <div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile">
        <span class="column is-narrow">
            <time datetime="2019-03-26T11:59:59.000Z" itemprop="datePublished">3æœˆ 26 2019</time>
        </span>
        
        
        <span class="column is-narrow">
            
            
            6 åˆ†é’Ÿ è¯»å®Œ (çº¦ 932 å­—)
        </span>
        
    </div>
    <div class="article-entry is-size-6-mobile" itemprop="articleBody">
    
        <p><strong><em> ä½œè€…ï¼š <a href="https://blog.teamtreehouse.com/author/guillermohernandez" target="_blank" rel="noopener">Guil Hernandez</a> </em></strong><br><strong><em> åŸæ–‡é“¾æ¥ï¼š<a href="https://blog.teamtreehouse.com/increase-your-sites-performance-with-hardware-accelerated-css" target="_blank" rel="noopener">Increase Your Siteâ€™s Performance with Hardware-Accelerated CSS</a> </em></strong></p>
<p>ä½ çŸ¥é“æˆ‘ä»¬å¯ä»¥æŠŠå›¾åƒç›¸å…³çš„ CSS ç‰¹æ€§äº¤ç»™ GPU(å›¾åƒå¤„ç†å•å…ƒ) å¤„ç†ï¼Œä»¥åˆ©ç”¨ç¡¬ä»¶åŠ é€Ÿåœ¨æµè§ˆå™¨ä¸­è·å¾—æ›´å¥½çš„æ¸²æŸ“æ€§èƒ½å—ï¼Ÿ</p>
<p>å½“ä»Šçš„å¤§å¤šæ•°ç”µè„‘éƒ½æœ‰å¯ç”¨äºç¡¬ä»¶åŠ é€Ÿçš„æ˜¾å¡ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨è¿™äº› GPU èµ„æºå»å¤„ç†é‚£äº›æ¯”è¾ƒè€—æ€§èƒ½çš„ç‰¹æ€§ï¼Œè¿™æ ·æˆ‘ä»¬çš„ç½‘ç«™å’Œåº”ç”¨åœ¨æµè§ˆå™¨ä¸­å°±èƒ½è·å¾—æ¯”å•çº¯ç”¨ CPU å¤„ç†æ›´å¥½çš„æ€§èƒ½è¡¨ç°ã€‚</p>
<p>è¿™ç¯‡æ–‡ç« é‡Œï¼Œæˆ‘ä»¬ä¼šè®²åˆ°æ¡Œé¢å’Œæ‰‹æœºç«¯æµè§ˆå™¨çš„ CSS ç¡¬ä»¶åŠ é€Ÿã€‚</p>
<h2 id="æ¡Œé¢å’Œæ‰‹æœºç«¯æµè§ˆå™¨ä¸­çš„-CSS-ç¡¬ä»¶åŠ é€Ÿ"><a href="#æ¡Œé¢å’Œæ‰‹æœºç«¯æµè§ˆå™¨ä¸­çš„-CSS-ç¡¬ä»¶åŠ é€Ÿ" class="headerlink" title="æ¡Œé¢å’Œæ‰‹æœºç«¯æµè§ˆå™¨ä¸­çš„ CSS ç¡¬ä»¶åŠ é€Ÿ"></a><strong>æ¡Œé¢å’Œæ‰‹æœºç«¯æµè§ˆå™¨</strong>ä¸­çš„ CSS ç¡¬ä»¶åŠ é€Ÿ</h2><p>ä½ æœ‰æ²¡æœ‰æƒ³è¿‡ä¸ºä»€ä¹ˆæœ‰äº› CSS åŠ¨ç”»åœ¨æµè§ˆå™¨ä¸­çœ‹èµ·æ¥æ¯”å…¶ä»–çš„æ›´æµç•…äº›ï¼Ÿ</p>
<p>CSS animations, transforms å’Œ transitions é»˜è®¤å¹¶ä¸ä¼šå¯ç”¨ GPU åŠ é€Ÿï¼Œè€Œæ˜¯è¢«æµè§ˆå™¨å†…éƒ¨çš„ï¼ˆæ¯”è¾ƒæ…¢çš„ï¼‰è½¯ä»¶å¼•æ“æ¸²æŸ“ã€‚é‚£ä¹ˆåˆ°åº•æ˜¯ä»€ä¹ˆå¼ºåˆ¶æµè§ˆå™¨åˆ‡æ¢åˆ° GPU æ¨¡å¼å‘¢ï¼Ÿè®¸å¤šæµè§ˆå™¨é€šè¿‡ä¸€äº›ç‰¹å®šçš„ CSS è§„åˆ™å¯ç”¨ GPU åŠ é€Ÿã€‚</p>
<p>å½“å‰ï¼ŒChrome, Firefox, Safari, IE9+ å’Œæœ€æ–°ç‰ˆçš„ Opera éƒ½æ”¯æŒç¡¬ä»¶åŠ é€Ÿï¼›å®ƒä»¬åªæœ‰åœ¨æ£€æµ‹åˆ°æŸä¸ª DOM å…ƒç´ å¯èƒ½ä¼šä»ä¸­è·ç›Šçš„æ—¶å€™æ‰ä¼šåº”ç”¨ç¡¬ä»¶åŠ é€Ÿã€‚åœ¨ CSS ä¸­ï¼Œæœ€æ˜¾çœ¼çš„è¿¹è±¡å°±æ˜¯è¿™ä¸ªå…ƒç´ ä½¿ç”¨äº† 3D å˜æ¢ã€‚</p>
<p>ä¾‹å¦‚ï¼š</p>
<figure class="highlight css hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-selector-class">.cube</span> &#123;</span><br><span class="line">   <span class="hljs-attribute">-webkit-transform</span>: <span class="hljs-built_in">translate3d</span>(250px,250px,250px)</span><br><span class="line">   <span class="hljs-built_in">rotate3d</span>(250px,250px,250px,-120deg)</span><br><span class="line">   <span class="hljs-built_in">scale3d</span>(0.5, 0.5, 0.5);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æŸäº›æ—¶å€™ï¼Œä½ å¯èƒ½å¹¶ä¸éœ€è¦ 3D å˜æ¢ä½†ä»ç„¶æƒ³åˆ©ç”¨ç¡¬ä»¶åŠ é€Ÿã€‚è¿™æ—¶å€™æœ‰å‡ ä¸ªéå¸¸é¡ºæ‰‹çš„ CSS ç‰¹æ€§å¯ä»¥ç”¨æ¥è§¦å‘æµè§ˆå™¨çš„ GPU åŠ é€Ÿã€‚</p>
<p>å°½ç®¡æˆ‘ä»¬çš„å…ƒç´ å¹¶ä¸æ˜¯åœ¨ 3D ç©ºé—´ä¸­åšåŠ¨ç”»ï¼Œæˆ‘ä»¬ä»ç„¶å¯ä»¥å¯ç”¨ 3D æ¸²æŸ“ã€‚é—²è¯ä¼‘æï¼Œ<code>transform: translateZ(0);</code> å£°æ˜åœ¨æ¡Œé¢å’Œæ‰‹æœºç«¯æµè§ˆå™¨ä¸­éƒ½ä¼šè§¦å‘ GPU åŠ é€Ÿã€‚çœ‹èµ·æ¥è¿™æ˜¯è§¦å‘ GPU åŠ é€Ÿçš„æœ€æœ‰æ•ˆçš„æ–¹å¼äº†ï¼ˆæ·»åŠ äº†æ‰€æœ‰æµè§ˆå™¨å‰ç¼€ï¼‰ï¼š</p>
<figure class="highlight css hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-selector-class">.cube</span> &#123;</span><br><span class="line">   <span class="hljs-attribute">-webkit-transform</span>: <span class="hljs-built_in">translateZ</span>(0);</span><br><span class="line">   <span class="hljs-attribute">-moz-transform</span>: <span class="hljs-built_in">translateZ</span>(0);</span><br><span class="line">   <span class="hljs-attribute">-ms-transform</span>: <span class="hljs-built_in">translateZ</span>(0);</span><br><span class="line">   <span class="hljs-attribute">-o-transform</span>: <span class="hljs-built_in">translateZ</span>(0);</span><br><span class="line">   <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateZ</span>(0);</span><br><span class="line">   <span class="hljs-comment">/* Other transform properties here */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨ Chrome å’Œ Safari ä¸­ä½¿ç”¨ CSS transforms æ—¶å¯èƒ½ä¼šæœ‰é—ªçƒã€‚ä¸‹é¢è¿™äº›å£°æ˜å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼š</p>
<figure class="highlight css hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-selector-class">.cube</span> &#123;</span><br><span class="line">   <span class="hljs-attribute">-webkit-backface-visibility</span>: hidden;</span><br><span class="line">   <span class="hljs-attribute">-moz-backface-visibility</span>: hidden;</span><br><span class="line">   <span class="hljs-attribute">-ms-backface-visibility</span>: hidden;</span><br><span class="line">   <span class="hljs-attribute">backface-visibility</span>: hidden;</span><br><span class="line"></span><br><span class="line">   <span class="hljs-attribute">-webkit-perspective</span>: <span class="hljs-number">1000</span>;</span><br><span class="line">   <span class="hljs-attribute">-moz-perspective</span>: <span class="hljs-number">1000</span>;</span><br><span class="line">   <span class="hljs-attribute">-ms-perspective</span>: <span class="hljs-number">1000</span>;</span><br><span class="line">   <span class="hljs-attribute">perspective</span>: <span class="hljs-number">1000</span>;</span><br><span class="line">   <span class="hljs-comment">/* Other transform properties here */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¦ä¸€ç§å¯ä»¥ç”¨åœ¨ Webkit å†…æ ¸çš„æ¡Œé¢å’Œæ‰‹æœºæµè§ˆå™¨ä¸­çš„æ–¹æ³•æ˜¯ä½¿ç”¨ <code>translate3d</code>ï¼š</p>
<figure class="highlight css hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-selector-class">.cube</span> &#123;</span><br><span class="line">   <span class="hljs-attribute">-webkit-transform</span>: <span class="hljs-built_in">translate3d</span>(0, 0, 0);</span><br><span class="line">   <span class="hljs-attribute">-moz-transform</span>: <span class="hljs-built_in">translate3d</span>(0, 0, 0);</span><br><span class="line">   <span class="hljs-attribute">-ms-transform</span>: <span class="hljs-built_in">translate3d</span>(0, 0, 0);</span><br><span class="line">   <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translate3d</span>(0, 0, 0);</span><br><span class="line">  <span class="hljs-comment">/* Other transform properties here */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åŸç”Ÿçš„æ‰‹æœºåº”ç”¨ä¸€ç›´åœ¨åˆ©ç”¨ GPU åŠ é€Ÿï¼Œè¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆå¤§å®¶ä¸€ç›´ä»¥æ¥çš„å°è±¡éƒ½æ˜¯åŸç”Ÿåº”ç”¨è¦æ¯”ç½‘é¡µåº”ç”¨æ›´æµç•…ä¸€äº›ã€‚åœ¨æ‰‹æœºä¸Šä½¿ç”¨ç¡¬ä»¶åŠ é€Ÿæ¥é™ä½èµ„æºæ¶ˆè€—æ˜¯éå¸¸æœ‰å¿…è¦çš„ã€‚</p>
<h2 id="ç»“è®º"><a href="#ç»“è®º" class="headerlink" title="ç»“è®º"></a>ç»“è®º</h2><p>æˆ‘ä»¬ä»‹ç»çš„è¿™äº›æ–¹æ³•åº”è¯¥åªç”¨äºéœ€è¦åŠ¨ç”»çš„å…ƒç´ ã€‚è¿™å¯ä»¥æé«˜ 2D å˜æ¢çš„æ€§èƒ½ï¼Œä¸è¿‡æŠŠè¿™ç§æ–¹æ³•ç”¨äºæ‰€æœ‰å…ƒç´ ç»ä¸æ˜¯ä¸€ä¸ªå¥½ä¸»æ„ã€‚</p>
<p>è°¨æ…ä½¿ç”¨è¿™äº›æ–¹æ³•ï¼Œåªæœ‰å½“ä½ é‡åˆ°æ€§èƒ½ç“¶é¢ˆæ—¶æ‰éœ€è¦ç”¨å®ƒä»¬ã€‚æ»¥ç”¨ GPU åŠ é€Ÿå°†å¯¼è‡´ä¸¥é‡çš„æ€§èƒ½é—®é¢˜ï¼Œå› ä¸ºç¡¬ä»¶åŠ é€Ÿä¼šå ç”¨å¤§é‡å†…å­˜ -- è€Œä¸”è¿˜ä¼šå½±å“ç”µæ± ç»­èˆªã€‚</p>
<p>ä½ åœ¨ä½ çš„é¡¹ç›®ä¸­ç”¨è¿‡è¿™äº›æ–¹æ³•å—ï¼Ÿå¦‚æœç”¨è¿‡ï¼Œè¯·åˆ†äº«ä¸€ä¸‹å“ªäº›æ–¹æ³•æœ€æœ‰æ•ˆæ€§èƒ½æœ€å¥½ã€‚</p>

    
    </div>
    
    
</article>




    
        <article class="article content gallery" itemscope="" itemprop="blogPost">
    <h1 class="article-title is-size-3 is-size-4-mobile" itemprop="name">
        
            <a href="/2019/02/08/Use-jquery-in-vue/" itemprop="url">ã€Œè¯‘ã€ å¦‚ä½•åœ¨ Vue ä¸­ï¼ˆå®‰å…¨çš„ï¼‰ä½¿ç”¨ jQuery æ’ä»¶</a>
        
    </h1>
    <div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile">
        <span class="column is-narrow">
            <time datetime="2019-02-08T01:17:40.000Z" itemprop="datePublished">2æœˆ 8 2019</time>
        </span>
        
        
        <span class="column is-narrow">
            
            
            10 åˆ†é’Ÿ è¯»å®Œ (çº¦ 1478 å­—)
        </span>
        
    </div>
    <div class="article-entry is-size-6-mobile" itemprop="articleBody">
    
        <p><strong><em>ä½œè€…ï¼š<a href="https://twitter.com/@anthonygore" target="_blank" rel="noopener">Anthony Gore</a> </em></strong><br><strong><em>åŸæ–‡é“¾æ¥ï¼š<a href="https://vuejsdevelopers.com/2017/05/20/vue-js-safely-jquery-plugin/" target="_blank" rel="noopener">How To (Safely) Use A jQuery Plugin With Vue.js</a></em></strong></p>
<p>åœ¨ä¸€ä¸ª UI ä¸­åŒæ—¶ä½¿ç”¨ Vue.js å’Œ jQuery å¹¶ä¸æ˜¯ä¸€ä¸ªå¥½ä¸»æ„ã€‚å¦‚æœå¯èƒ½çš„è¯è¦é¿å…è¿™ç§æƒ…å½¢ã€‚</p>
<p>ä¸è¿‡æ—¢ç„¶ä½ å·²ç»çœ‹åˆ°è¿™é‡Œäº†ï¼Œä¼°è®¡ä½ æ˜¯éè¦åŒæ—¶ç”¨ Vue å’Œ jQuery ä¸å¯äº†ã€‚æˆ–è®¸æ˜¯å®¢æˆ·åšæŒè¦ä½¿ç”¨æŸä¸ª jQuery æ’ä»¶è€Œä½ åˆæ²¡æ—¶é—´å»æŠŠå®ƒç”¨ Vue é‡å†™ã€‚</p>
<p>åªè¦ä½ è°¨æ…çš„æ“ä½œï¼Œè¿˜æ˜¯å¯ä»¥åŒæ—¶ä½¿ç”¨ Vue å’Œ jQuery çš„ã€‚è¿™ç¯‡æ–‡ç« é‡Œæˆ‘å°†æ¼”ç¤ºå¦‚ä½•åœ¨ Vue é¡¹ç›®ä¸­ä½¿ç”¨ä¸€ä¸ª jQuery UI çš„ Datepicker æ’ä»¶ã€‚</p>
<p>è€Œä¸”ä¸ºäº†å°å°çš„ç‚«ä¸€ä¸‹æŠ€ï¼Œæˆ‘è¿˜è¦åœ¨ jQuery æ’ä»¶å’Œ Vue ä¹‹é—´ä¼ é€’æ•°æ®ï¼</p>
<p>ç‚¹å‡»è¿™é‡ŒæŸ¥çœ‹ç¤ºä¾‹ä»£ç  <a href="https://jsbin.com/bepikonube/2/edit?html,js,output" target="_blank" rel="noopener">JS Bin</a></p>
<p><img src="/pictures/1-jq-in-vue/jquery_plugin_1.png" alt="jquery ui datepicker"></p>
<p><em>jQuery UI Datepicker</em></p>
<h2 id="åŒæ—¶ä½¿ç”¨-jQuery-å’Œ-Vue-å­˜åœ¨çš„é—®é¢˜"><a href="#åŒæ—¶ä½¿ç”¨-jQuery-å’Œ-Vue-å­˜åœ¨çš„é—®é¢˜" class="headerlink" title="åŒæ—¶ä½¿ç”¨ jQuery å’Œ Vue å­˜åœ¨çš„é—®é¢˜"></a>åŒæ—¶ä½¿ç”¨ jQuery å’Œ Vue å­˜åœ¨çš„é—®é¢˜</h2><p>ä¸ºä»€ä¹ˆè¯´è¿™ç§ç”¨æ³•ä¼šæœ‰æ½œåœ¨çš„é£é™©å‘¢ï¼Ÿ</p>
<p>å¯ä»¥è¯´ Vue æ˜¯ä¸€ä¸ªå æœ‰æ¬²éå¸¸å¼ºçš„æ¡†æ¶ï¼Œå¥¹æ€»æƒ³å®Œå…¨æ§åˆ¶ä½ äº¤ç»™å¥¹çš„è¿™éƒ¨åˆ† DOM å…ƒç´ ï¼ˆä¼ é€’ç»™ el å±æ€§çš„å…ƒç´ ï¼‰ã€‚å¦‚æœ jQuery ä¿®æ”¹äº† Vue ç®¡è¾–ä¸‹çš„å…ƒç´ ï¼Œä¾‹å¦‚ä¸ºæŸä¸ªå…ƒç´ æ·»åŠ äº†ä¸€ä¸ª classï¼Œ Vue æ— æ³•æ„ŸçŸ¥åˆ°è¿™æ¬¡ä¿®æ”¹ï¼Œæ‰€ä»¥ä¸‹æ¬¡ Vue æ›´æ–° DOM æ—¶ä¼šç›´æ¥è¦†ç›– jQuery æ‰€åšçš„ä¿®æ”¹ã€‚</p>
<h2 id="è§£å†³æ–¹æ¡ˆï¼šæŠŠ-jQuery-æ’ä»¶åŒ…è£…æˆ-Vue-ç»„ä»¶"><a href="#è§£å†³æ–¹æ¡ˆï¼šæŠŠ-jQuery-æ’ä»¶åŒ…è£…æˆ-Vue-ç»„ä»¶" class="headerlink" title="è§£å†³æ–¹æ¡ˆï¼šæŠŠ jQuery æ’ä»¶åŒ…è£…æˆ Vue ç»„ä»¶"></a>è§£å†³æ–¹æ¡ˆï¼šæŠŠ jQuery æ’ä»¶åŒ…è£…æˆ Vue ç»„ä»¶</h2><p>æ—¢ç„¶ Vue å’Œ jQuery ç»ä¸ä¼šåˆ†äº«åŒä¸€ä»½ DOMï¼Œæˆ‘ä»¬å¿…é¡»è®© Vue åˆ†å‰²å‡ºä¸€å—åŒºåŸŸäº¤ç»™ jQueryã€‚</p>
<p>çœ‹èµ·æ¥æŠŠ jQuery æ’ä»¶åŒ…è£…æˆ Vue ç»„ä»¶æ˜¯ä¸ªåŠæ³•ï¼Œå› ä¸ºï¼š</p>
<ul>
<li>æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ Vue ç”Ÿå‘½å‘¨æœŸå‹¾å­æ¥è®¾ç½®æˆ–å¸è½½ jQuery ä»£ç </li>
<li>æˆ‘ä»¬å¯ä»¥é€šè¿‡ç»„ä»¶æ¥å£ä½¿ç”¨ props å’Œ events æ¥ä¸ Vue åº”ç”¨é€šä¿¡</li>
<li>ç»„ä»¶å¯ä»¥é€šè¿‡è®¾ç½® <code>v-once</code> é¿å…è¢« Vue æ›´æ–°</li>
</ul>
<h2 id="è®¾ç½®-jQuery-UI-Datepicker"><a href="#è®¾ç½®-jQuery-UI-Datepicker" class="headerlink" title="è®¾ç½® jQuery UI Datepicker"></a>è®¾ç½® jQuery UI Datepicker</h2><p>é¦–å…ˆè¦åšçš„å½“ç„¶æ˜¯åœ¨ä½ çš„é¡¹ç›®ä¸­å¼•å…¥ jQuery UI æ’ä»¶ã€‚ç„¶åä½ åªéœ€è¦æŠŠ datepicker æ’ä»¶ç»‘å®šåˆ°ä¸€ä¸ª <code>input</code> å…ƒç´ ä¸Šï¼š</p>
<figure class="highlight html hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Date: <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"datepicker"</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>é€‰ä¸­å¹¶åˆå§‹åŒ– Datepicker</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="hljs-string">'#datepicker'</span>).datepicker();</span><br></pre></td></tr></table></figure>
<h2 id="Datepicker-ç»„ä»¶"><a href="#Datepicker-ç»„ä»¶" class="headerlink" title="Datepicker ç»„ä»¶"></a>Datepicker ç»„ä»¶</h2><p>æˆ‘ä»¬çš„ datepicker ç»„ä»¶å¾ˆç®€å•ï¼Œtemplate åªæœ‰ä¸€ä¸ª <code>input</code> å…ƒç´ ï¼š</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Vue.component(<span class="hljs-string">'date-picker'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">  template: <span class="hljs-string">'&lt;input/&gt;'</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="hljs-string">'#app'</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<figure class="highlight html hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"app"</span>&gt;</span></span><br><span class="line">  Date: <span class="hljs-tag">&lt;<span class="hljs-name">date-picker</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">date-picker</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>æ³¨æ„ï¼šç»„ä»¶åªæ˜¯ä¸º jQuery æ’ä»¶æä¾›ä¸€ä¸ªåŒ…è£…ã€‚ä¸è¦è¯•å›¾ä¸ºç»„ä»¶å…ƒç´ æ·»åŠ ä»»ä½• data å±æ€§æˆ– Vue directives æˆ– slotsã€‚</p>
</blockquote>
<h2 id="æ’ä»¶å®ä¾‹åŒ–"><a href="#æ’ä»¶å®ä¾‹åŒ–" class="headerlink" title="æ’ä»¶å®ä¾‹åŒ–"></a>æ’ä»¶å®ä¾‹åŒ–</h2><p>åœ¨è¿™é‡Œæˆ‘ä»¬å°†ä½¿ç”¨ <code>this.$el</code> è€Œä¸æ˜¯ <code>input</code> å…ƒç´ çš„ ID æ¥é€‰æ‹©æ’ä»¶å…ƒç´ ï¼Œæ¯ä¸ª Vue ç»„ä»¶éƒ½å¯ä»¥åƒè¿™æ ·æ¥è®¿é—®åˆ°è‡ªå·±çš„æ ¹å…ƒç´ ã€‚æˆ‘ä»¬è¿™é‡Œçš„æ ¹å…ƒç´ å°±æ˜¯ <code>input</code>ã€‚</p>
<p>ç„¶åæˆ‘ä»¬å¯ä»¥æŠŠè¿™ä¸ªå…ƒç´ å¼•ç”¨ä¼ é€’ç»™ jQuery é€‰æ‹©å™¨å¹¶è°ƒç”¨ <code>datepicker</code> æ–¹æ³•ã€‚ä¾‹ï¼š<code>$(this.$el).datepicker()</code>ã€‚</p>
<p>æ³¨æ„æˆ‘ä»¬çš„ä»£ç æ˜¯å†™åœ¨åœ¨ Vue ç»„ä»¶ç”Ÿå‘½å‘¨æœŸçš„ <code>mounted</code> é˜¶æ®µï¼Œå› ä¸ºåœ¨æ­¤ä¹‹å‰ <code>this.$el</code> è¿˜æ˜¯ undefined çŠ¶æ€ã€‚</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Vue.component(<span class="hljs-string">'date-picker'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">  template: <span class="hljs-string">'&lt;input/&gt;'</span>,</span><br><span class="line">  mounted: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">    $(<span class="hljs-keyword">this</span>.$el).datepicker();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h2 id="å¸è½½"><a href="#å¸è½½" class="headerlink" title="å¸è½½"></a>å¸è½½</h2><p>ç±»ä¼¼çš„ï¼Œå¸è½½ datepicker æ’ä»¶åŒæ ·ä¹Ÿä¼šç”¨åˆ°ç”Ÿå‘½å‘¨æœŸå‹¾å­ã€‚æ³¨æ„æˆ‘ä»¬å¿…é¡»åœ¨ <code>beforeDestroy</code> é˜¶æ®µæ‰§è¡Œå¸è½½ï¼Œå› ä¸ºåœ¨è¿™ä¸ªé˜¶æ®µ <code>input</code> å…ƒç´ ä»ç„¶å­˜åœ¨äº DOM ä¸­ï¼Œæˆ‘ä»¬æ‰èƒ½é€‰ä¸­å®ƒï¼ˆåœ¨ <code>destroy</code> é˜¶æ®µå®ƒå°†å˜æˆ undefinedï¼‰ã€‚</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Vue.component(<span class="hljs-string">'date-picker'</span>, &#123;</span><br><span class="line">  template: <span class="hljs-string">'&lt;input/&gt;'</span>,</span><br><span class="line">  mounted: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">    $(<span class="hljs-keyword">this</span>.$el).datepicker();</span><br><span class="line">  &#125;,</span><br><span class="line">  beforeDestroy: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">    $(<span class="hljs-keyword">this</span>.$el).datepicker(<span class="hljs-string">'hide'</span>).datepicker(<span class="hljs-string">'destroy'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h2 id="é€šè¿‡-props-ä¼ é€’å‚æ•°"><a href="#é€šè¿‡-props-ä¼ é€’å‚æ•°" class="headerlink" title="é€šè¿‡ props ä¼ é€’å‚æ•°"></a>é€šè¿‡ props ä¼ é€’å‚æ•°</h2><p>ä¸ºäº†ä½¿æˆ‘ä»¬çš„ç»„ä»¶å¯å¤ç”¨ï¼Œæœ€å¥½è®©å®ƒèƒ½æ¥å—è‡ªå®šä¹‰è®¾ç½®å‚æ•°ï¼Œä¾‹å¦‚é€šè¿‡è®¾ç½®å±æ€§ <code>dateFormat</code> æ¥åˆ¶å®šæ—¥æœŸæ ¼å¼ã€‚é€šè¿‡ <code>props</code> å¯ä»¥å®ç°è¿™ä¸€ç›®æ ‡ï¼š</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Vue.component(<span class="hljs-string">'date-picker'</span>, &#123;</span><br><span class="line">  template: <span class="hljs-string">'&lt;input/&gt;'</span>,</span><br><span class="line">  props: [ <span class="hljs-string">'dateFormat'</span> ],</span><br><span class="line">  mounted: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">    $(<span class="hljs-keyword">this</span>.$el).datepicker(&#123;</span><br><span class="line">      dateFormat: <span class="hljs-keyword">this</span>.dateFormat</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line">  beforeDestroy: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123; ... &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<figure class="highlight html hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"app"</span>&gt;</span></span><br><span class="line">  <span class="hljs-tag">&lt;<span class="hljs-name">date-picker</span> <span class="hljs-attr">date-format</span>=<span class="hljs-string">"yy-mm-dd"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">date-picker</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="è®©-jQuery-æ¥æ”¶æ›´æ–°"><a href="#è®©-jQuery-æ¥æ”¶æ›´æ–°" class="headerlink" title="è®© jQuery æ¥æ”¶æ›´æ–°"></a>è®© jQuery æ¥æ”¶æ›´æ–°</h2><p>æ¯”æ–¹è¯´ä½ ä¸æ»¡è¶³äºåªæ˜¯ä¼ ç»™ <code>dateFormat</code> prop ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè€Œæ˜¯æŠŠ <code>dateFormat</code> è®¾ç½®æˆ Vue æ ¹å®ä¾‹ä¸Šçš„ä¸€ä¸ªå±æ€§ï¼Œä¾‹ï¼š</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">var</span> vm = <span class="hljs-keyword">new</span> Vue(&#123;</span><br><span class="line">  data: &#123;</span><br><span class="line">    ...</span><br><span class="line">    dateFormat: <span class="hljs-string">'yy-mm-dd'</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<figure class="highlight html hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"app"</span>&gt;</span></span><br><span class="line">  <span class="hljs-tag">&lt;<span class="hljs-name">date-picker</span> <span class="hljs-attr">date-format</span>=<span class="hljs-string">"dateFormat"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">date-picker</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>è¿™æ ·ä¸€æ¥ï¼Œ<code>dateFormat</code> å°±å˜æˆäº†ä¸€ä¸ªå“åº”å¼çš„ data å±æ€§ã€‚ä½ å¯ä»¥éšæ—¶åœ¨åº”ç”¨ä¸­æ›´æ”¹å®ƒçš„å€¼ï¼š</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// æ›´æ”¹æ—¥æœŸæ˜¾ç¤ºæ ¼å¼</span></span><br><span class="line">vm.dateFormat = <span class="hljs-string">'yy-dd-mm'</span>;</span><br></pre></td></tr></table></figure>
<p>ç”±äº <code>dateFormat</code> prop æ˜¯ datepicker ç»„ä»¶çš„ <code>mounted</code> é’©å­çš„ä¾èµ–é¡¹ï¼Œæ›´æ–°å®ƒçš„å€¼å°†å¯¼è‡´ç»„ä»¶é‡æ–°æ¸²æŸ“ã€‚è¿™å°±ä¸å¦™äº†ã€‚å› ä¸º jQuery å·²ç»åœ¨ <code>input</code> å…ƒç´ ä¸Šè®¾ç½®å¥½äº† datepicker å¹¶ä¸”æ·»åŠ äº†è‡ªå·±çš„ class å’Œ äº‹ä»¶ç›‘å¬ã€‚ç»„ä»¶é‡æ–°æ¸²æŸ“å°†å¯¼è‡´ <code>input</code> å…ƒç´ è¢«æ›¿æ¢è€Œä¸” jQuery æ‰€åšçš„è®¾ç½®ä¹Ÿè¢«é‡ç½®äº†ã€‚</p>
<p>æˆ‘ä»¬éœ€è¦å°†ç»„ä»¶è®¾ç½®ä¸ºæ¥æ”¶æ•°æ®ä¸é‡æ–°æ¸²æŸ“â€¦</p>
<h2 id="v-once"><a href="#v-once" class="headerlink" title="v-once"></a>v-once</h2><p><code>v-once</code> æŒ‡ä»¤ç”¨äºç¼“å­˜ä¸€ä¸ªåŒ…å«å¤§é‡é™æ€å†…å®¹çš„ç»„ä»¶ã€‚å¯¼è‡´çš„ç»“æœå°±æ˜¯è¿™ä¸ªç»„ä»¶æ¸²æŸ“ä¸ä¼šå—æ•°æ®æ›´æ–°çš„å½±å“ã€‚</p>
<p>æˆ‘ä»¬çš„ç»„ä»¶æ­£å¥½ç”¨åˆ°è¿™ä¸ªç‰¹æ€§ï¼Œå› ä¸ºå®ƒæœ‰æ•ˆçš„é¿å…äº†è¢« Vue é‡æ–°æ¸²æŸ“ã€‚å› æ­¤æˆ‘ä»¬æœ‰ç†ç”±ç›¸ä¿¡ jQuery å°†å¯ä»¥åœ¨åº”ç”¨çš„ç”Ÿå‘½å‘¨æœŸä¸­æ— éšœç¢çš„æ“ä½œè¿™ä¸ª <code>input</code> å…ƒç´ ã€‚</p>
<figure class="highlight html hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"app"</span>&gt;</span></span><br><span class="line">  <span class="hljs-tag">&lt;<span class="hljs-name">date-picker</span> <span class="hljs-attr">date-format</span>=<span class="hljs-string">"yy-mm-dd"</span> <span class="hljs-attr">v-once</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">date-picker</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="ä»-jQuery-å‘-Vue-ä¼ é€’æ•°æ®"><a href="#ä»-jQuery-å‘-Vue-ä¼ é€’æ•°æ®" class="headerlink" title="ä» jQuery å‘ Vue ä¼ é€’æ•°æ®"></a>ä» jQuery å‘ Vue ä¼ é€’æ•°æ®</h2><p>å¦‚æœæˆ‘ä»¬ä¸èƒ½åœ¨ app ä¸­è·å–åˆ° datepicker é€‰ä¸­çš„æ—¥æœŸï¼Œé‚£å®ƒå°±æ²¡å•¥ç”¨äº†ã€‚è®©æˆ‘ä»¬æ¥å®ç°è¿™ä¸ªç›®æ ‡ã€‚</p>
<p>é¦–å…ˆç»™ root å®ä¾‹ä¸€ä¸ª <code>date</code> å±æ€§ï¼š</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="hljs-string">'#app'</span>,</span><br><span class="line">  data: &#123;</span><br><span class="line">    date: <span class="hljs-literal">null</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<figure class="highlight html hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"app"</span>&gt;</span></span><br><span class="line">  <span class="hljs-tag">&lt;<span class="hljs-name">date-picker</span> <span class="hljs-attr">date-format</span>=<span class="hljs-string">"yy-mm-dd"</span> <span class="hljs-attr">v-once</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">date-picker</span>&gt;</span></span><br><span class="line">  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>&#123;&#123; date &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>datepicker æ’ä»¶æœ‰ä¸€ä¸ª <code>onSelect</code> å›è°ƒå‡½æ•°æ¥å¤„ç†é€‰ä¸­æ—¥æœŸçš„æ“ä½œã€‚é€šè¿‡å®ƒæˆ‘ä»¬å¯ä»¥åœ¨ç»„ä»¶ä¸­ä½¿ç”¨è‡ªå®šä¹‰äº‹ä»¶å‘å‡ºæ•°æ®ã€‚</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mounted: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">  <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>;</span><br><span class="line">  $(<span class="hljs-keyword">this</span>.$el).datepicker(&#123;</span><br><span class="line">    dateFormat: <span class="hljs-keyword">this</span>.dateFormat,</span><br><span class="line">    onSelect: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">date</span>) </span>&#123;</span><br><span class="line">      self.$emit(<span class="hljs-string">'update-date'</span>, date);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨æ ¹å®ä¾‹ä¸Šç›‘å¬è‡ªå®šä¹‰äº‹ä»¶å¹¶æ¥æ”¶æ–°æ•°æ®ï¼š</p>
<figure class="highlight html hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"app"</span>&gt;</span></span><br><span class="line">  <span class="hljs-tag">&lt;<span class="hljs-name">date-picker</span> @<span class="hljs-attr">update-date</span>=<span class="hljs-string">"updateDate"</span> <span class="hljs-attr">date-format</span>=<span class="hljs-string">"yy-mm-dd"</span> <span class="hljs-attr">v-once</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">date-picker</span>&gt;</span></span><br><span class="line">  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>&#123;&#123; date &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="hljs-string">'#app'</span>,</span><br><span class="line">  data: &#123;</span><br><span class="line">    date: <span class="hljs-literal">null</span></span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    updateDate: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">date</span>) </span>&#123;</span><br><span class="line">      <span class="hljs-keyword">this</span>.date = date;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>æ„Ÿè°¢<a href="http://stackoverflow.com/a/40350880/2278963" target="_blank" rel="noopener">è¿™ä¸ª Stack Overflow å›ç­”</a> æä¾›çš„çµæ„Ÿ</p>

    
    </div>
    
    
</article>




    
        <article class="article content gallery" itemscope="" itemprop="blogPost">
    <h1 class="article-title is-size-3 is-size-4-mobile" itemprop="name">
        
            <a href="/2019/02/07/Testing-post/" itemprop="url">Testing post</a>
        
    </h1>
    <div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile">
        <span class="column is-narrow">
            <time datetime="2019-02-07T13:24:51.000Z" itemprop="datePublished">2æœˆ 7 2019</time>
        </span>
        
        
        <span class="column is-narrow">
            
            
            å‡ ç§’ è¯»å®Œ (çº¦ 9 å­—)
        </span>
        
    </div>
    <div class="article-entry is-size-6-mobile" itemprop="articleBody">
    
        <p>This is a testing post.<br>Created at February 7th, 2019, 21:26</p>

    
    </div>
    
    
</article>




    
        <article class="article content gallery" itemscope="" itemprop="blogPost">
    <h1 class="article-title is-size-3 is-size-4-mobile" itemprop="name">
        
            <a href="/2019/02/02/hello-world/" itemprop="url">Hello World 2</a>
        
    </h1>
    <div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile">
        <span class="column is-narrow">
            <time datetime="2019-02-02T05:01:50.045Z" itemprop="datePublished">2æœˆ 2 2019</time>
        </span>
        
        
        <span class="column is-narrow">
            
            
            1 åˆ†é’Ÿ è¯»å®Œ (çº¦ 121 å­—)
        </span>
        
    </div>
    <div class="article-entry is-size-6-mobile" itemprop="articleBody">
    
        <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="hljs-string">"My New Post"</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>

    
    </div>
    
    
</article>




    
    
    </div>
</section>
    <footer class="footer">
    <div class="container">
        <div class="columns content">
            <div class="column is-narrow has-text-centered">
                &copy; 2019 w.z&nbsp;
                Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> & <a href="http://github.com/ppoffice/hexo-theme-minos">Minos</a>
            </div>
            <div class="column is-hidden-mobile"></div>

            
            <div class="column is-narrow">
                <div class="columns is-mobile is-multiline is-centered">
                
                    
                <a class="column is-narrow has-text-black" title="GitHub" href="https://github.com/ppoffice/hexo-theme-minos">
                    
                    GitHub
                    
                </a>
                
                </div>
            </div>
            
            
        </div>
    </div>
</footer>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.2/moment-with-locales.min.js"></script>

<!-- test if the browser is outdated -->
<!-- <div id="outdated">
    <h6>Your browser is out-of-date!</h6>
    <p>Update your browser to view this website correctly. <a id="btnUpdateBrowser" href="http://outdatedbrowser.com/">Update my browser now </a></p>
    <p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">&times;</a></p>
</div>
<script src="//cdnjs.cloudflare.com/ajax/libs/outdated-browser/1.1.5/outdatedbrowser.min.js"></script> -->
<!-- <script>
    $(document).ready(function () {
        // plugin function, place inside DOM ready function
        outdatedBrowser({
            bgColor: '#f25648',
            color: '#ffffff',
            lowerThan: 'flex'
        })
    });
</script> -->

<script>
    window.FontAwesomeConfig = {
        searchPseudoElements: true
    }
    moment.locale("zh-CN");
</script>


    
    
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-MML-AM_CHTML"></script>
<script>
    MathJax.Hub.Config({
        "HTML-CSS": {matchFontHeight: false},
        SVG: {matchFontHeight: false},
        CommonHTML: {matchFontHeight: false}
    });
</script>

    
    
    
    
<script src="//cdnjs.cloudflare.com/ajax/libs/lightgallery/1.6.8/js/lightgallery-all.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/justifiedGallery/3.6.5/js/jquery.justifiedGallery.min.js"></script>
<script>
    (function ($) {
        $(document).ready(function () {
            if (typeof($.fn.lightGallery) === 'function') {
                $('.article.gallery').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof($.fn.justifiedGallery) === 'function') {
                $('.justified-gallery').justifiedGallery();
            }
        });
    })(jQuery);
</script>

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script>
    <style>
        .hljs {
            position: relative;
        }

        .hljs .clipboard-btn {
            float: right;
            color: #9a9a9a;
            background: none;
            border: none;
        }

        .hljs > .clipboard-btn {
            display: none;
            position: absolute;
            right: 4px;
            top: 4px;
        }

        .hljs:hover > .clipboard-btn {
            display: inline;
        }

        .hljs > figcaption > .clipboard-btn {
            margin-right: 4px;
        }
    </style>
    <script>
      $(document).ready(function () {
        $('figure.hljs').each(function(i, figure) {
          var codeId = 'code-' + i;
          var code = figure.querySelector('.code');
          var copyButton = $('<button>Copy <i class="far fa-clipboard"></i></button>');
          code.id = codeId;
          copyButton.addClass('clipboard-btn');
          copyButton.attr('data-clipboard-target-id', codeId);

          var figcaption = figure.querySelector('figcaption');

          if (figcaption) {
            figcaption.append(copyButton[0]);
          } else {
            figure.prepend(copyButton[0]);
          }
        })

        var clipboard = new ClipboardJS('.clipboard-btn', {
          target: function(trigger) {
            return document.getElementById(trigger.getAttribute('data-clipboard-target-id'));
          }
        });
      })
    </script>

    
    

    


<script src="/js/script.js"></script>

    
    <div class="searchbox ins-search">
    <div class="searchbox-mask"></div>
    <div class="searchbox-container ins-search-container">
        <div class="searchbox-input-wrapper">
            <input type="text" class="searchbox-input ins-search-input" placeholder="ç«™å†…æœç´¢">
            <span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="searchbox-result-wrapper ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
    (function (window) {
        var INSIGHT_CONFIG = {
            TRANSLATION: {
                POSTS: 'æ–‡ç« ',
                PAGES: 'é¡µé¢',
                CATEGORIES: 'åˆ†ç±»',
                TAGS: 'æ ‡ç­¾',
                UNTITLED: '(æ— æ ‡é¢˜)',
            },
            CONTENT_URL: '/content.json',
        };
        window.INSIGHT_CONFIG = INSIGHT_CONFIG;
    })(window);
</script>
<script src="/js/insight.js"></script>
    
</body>
</html>